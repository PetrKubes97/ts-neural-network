!function(t){var e={};function n(i){if(e[i])return e[i].exports;var s=e[i]={i:i,l:!1,exports:{}};return t[i].call(s.exports,s,s.exports,n),s.l=!0,s.exports}n.m=t,n.c=e,n.d=function(t,e,i){n.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:i})},n.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},n.t=function(t,e){if(1&e&&(t=n(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var i=Object.create(null);if(n.r(i),Object.defineProperty(i,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var s in t)n.d(i,s,function(e){return t[e]}.bind(null,s));return i},n.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return n.d(e,"a",e),e},n.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},n.p="",n(n.s=0)}([function(t,e,n){"use strict";n.r(e);class i{constructor(t,e,n,i,s,r=!1){this.x=t,this.y=e,this.activation=n,this.name=i,this.isBias=r,this.id=s}}const s={output:t=>1/(1+Math.exp(-t)),der:t=>{let e=s.output(t);return e*(1-e)}};var r;!function(t){t[t.L1=0]="L1",t[t.L2=1]="L2",t[t.NONE=2]="NONE"}(r||(r={}));const a={cost:t=>t.reduce((t,e)=>t+e.reduce((t,e)=>t+Math.abs(e.getWeight()),0),0)*(1/h(t)),der:(t,e)=>1/e*(t>0?1:-1)},o={cost:t=>.5*t.reduce((t,e)=>t+e.reduce((t,e)=>t+Math.pow(e.getWeight(),2),0),0)*(1/h(t)),der:(t,e)=>t*(1/e)};class u{constructor(t,e){this.input=t,this.output=e}}const h=t=>t.reduce((t,e)=>t+e.length,0);class c{constructor(t,e=!1){this.inputs=[],this.outputs=[],this.isInput=!1,this.isCalculated=!1,this.isBias=!1,this.name=t,this.isBias=e}getName(){return this.name}getIsBias(){return this.isBias}setAsInputNeuron(t){this.isInput=!0,this.activation=t,this.inputs=null}setInput(t){if(!this.isInput)throw"Cannot set activation of non-input neuron";this.activation=t}setSigma(t){this.sigma=t}addInput(t){this.inputs.push(t)}getInputs(){return this.inputs}addOutput(t){this.outputs.push(t)}getOutputs(){return this.outputs}setOutputs(t){this.outputs=t}setInputs(t){this.inputs=t}resetInputs(){this.inputs=[]}resetOutputs(){this.outputs=[]}reset(){this.isCalculated=!1}getActivation(){return this.isBias&&(this.activation=1),this.activation}getSigma(){return this.sigma}calculateActivation(){return this.isInput||this.isCalculated||this.isBias||(this.activation=s.output(this.inputs.reduce((t,e)=>t+e.calculateValue(),0)),this.isCalculated=!0),this.getActivation()}}class l{constructor(t,e){this.weight=10*Math.random()-5,this.sampleWeightChanges=[],this.inputNeuron=t,this.outputNeuron=e}addSampleWeightChange(t){this.sampleWeightChanges.push(t)}applyAverageWeightChange(){const t=this.sampleWeightChanges.reduce((t,e)=>t+e,0)/this.sampleWeightChanges.length;this.weight+=t,this.sampleWeightChanges=[]}getWeight(){return this.weight}calculateValue(){return this.weight*this.inputNeuron.calculateActivation()}getOutputNeuron(){return this.outputNeuron}getInputNeuron(){return this.inputNeuron}}window.slide=((t,e)=>{m[t]=e,g.evaluate(m),d.draw(g.getNeurons(),g.getConnections())}),window.addOrRemoveLayer=(t=>{g.addOrRemoveLayer(t),M()}),window.addOrRemoveNeuron=((t,e)=>{g.addOrRemoveNeuron(t,e),0==e&&(t?m.push(1):m.pop()),M()}),window.train=(t=>{let e=t?Number.parseInt(v.value):1;switch(g.setRate(Number.parseFloat(w.value)),I.value){case"L1":g.setRegularizationType(r.L1);break;case"L2":g.setRegularizationType(r.L2);break;case"none":g.setRegularizationType(r.NONE)}g.setRegularizationRate(Number.parseFloat(C.value)),O.checked&&null==T?(x.innerText="Stop",T=setInterval(()=>{p(e)},100)):null!=T?(clearInterval(T),T=null,x.innerText="Start"):p(e)});const p=t=>{for(let e=0;e<t;e++)g.train();M()};let g,d,m;window.setTrainingData=(()=>{try{const t=JSON.parse(L.value);g.setTrainingSamples([]),t.forEach(t=>{g.addTrainingSet(t[0],t[1])}),g.reset(),M()}catch(t){alert(t)}}),window.reset=(()=>{g.reset(),M()}),window.applyTrainingSample=(t=>{m=g.getTrainingSamples()[t].input,M()}),window.onload=(()=>{R()});let y,f,N,S,b,w,v,I,C,O,x,E,z,L,T=null,$=[3];const R=()=>{N=document.getElementById("content"),f=document.getElementById("input-controls"),y=document.getElementById("layer-controls"),b=document.getElementById("iter-output"),S=document.getElementById("cost"),w=document.getElementById("rate-input"),v=document.getElementById("iters-input"),I=document.getElementById("regularization-type-input"),C=document.getElementById("regularization-rate-input"),z=document.getElementById("training-set-data-output"),E=document.getElementById("training-set-neurons-output"),L=document.getElementById("training-set-input"),O=document.getElementById("train-repeat-chckbx"),x=document.getElementById("train-btn"),d=new class{constructor(t){this.content=t,this.ctx=t.getContext("2d"),this.height=t.height,this.width=t.width}draw(t,e){this.ctx.clearRect(0,0,this.width,this.height),this.drawableNeurons=[],this.drawableInputNeurons=[];const n=this.width/(t.length+1);t.forEach((e,s)=>{const r=this.height/(e.length+2);if(e.forEach((t,e)=>{const a=new i(n*(1+s),r*(1+e),t.getActivation(),t.getName(),e);this.drawableNeurons.push(a),0===s&&this.drawableInputNeurons.push(a)}),s!=t.length-1){const e=n*(1+s),a=r*(1+t[s].length),o=new i(e,a,1,`bias${s}`,t[s].length,!0);this.drawableNeurons.push(o)}});const s=new Map;this.drawableNeurons.forEach(t=>s.set(t.name,t)),e.forEach((t,e)=>{t.forEach(t=>{const n=t.getInputNeuron().getIsBias()?`bias${e}`:t.getInputNeuron().getName();this.drawConnection(s.get(n),s.get(t.getOutputNeuron().getName()),t.getWeight())})}),this.drawableNeurons.forEach(t=>{this.drawNeuron(t)})}drawNeuron(t){this.ctx.beginPath(),this.ctx.arc(t.x,t.y,25,0,2*Math.PI),this.ctx.fillStyle="rgb(255,255,255)",this.ctx.fill(),this.ctx.beginPath(),t.isBias?this.ctx.fillStyle="rgba(46,40,42, 1)":this.ctx.fillStyle=`rgba(61, 232, 255, ${t.activation})`,this.ctx.strokeStyle="rgb(46,40,42, 1)",this.ctx.lineWidth=1,this.ctx.arc(t.x,t.y,25,0,2*Math.PI),this.ctx.fill(),this.ctx.stroke(),this.ctx.fillStyle="rgb(46,40,42, 1)",this.ctx.font="bold 16px serif";const e=Number(t.activation).toFixed(2);this.ctx.fillText(e,t.x-this.ctx.measureText(e).width/2,t.y+16/3)}drawConnection(t,e,n){this.ctx.beginPath(),this.ctx.lineWidth=Math.log(1.001+Math.abs(n)),this.ctx.strokeStyle=n>0?"rgba(61, 232, 255, 1)":"rgba(205, 83, 52, 1)",this.ctx.moveTo(t.x,t.y),this.ctx.lineTo(e.x,e.y),this.ctx.closePath(),this.ctx.stroke()}getDrawableInputNeurons(){return this.drawableInputNeurons}}(N),B()},B=()=>{(g=new class{constructor(t,e,n){this.iterCnt=0,this.rate=1,this.lambda=.001,this.regType=r.NONE,this.biasNeuron=new c("bias",!0),this.neurons=[],this.connections=[],this.trainSamples=[],this.inputSize=t,this.hiddenLayerSizes=e,this.outputSize=n,this.layerCnt=e.length+2,this.neurons=[],this.connections=[],this.init()}init(){for(let t=0;t<this.layerCnt;t++){let e=0;switch(t){case 0:e=this.inputSize;break;case this.hiddenLayerSizes.length+1:e=this.outputSize;break;default:e=this.hiddenLayerSizes[t-1]}this.neurons[t]=[];for(let n=0;n<e;n++)this.neurons[t][n]=new c(`Neuron${t}${n}`),0==t&&this.neurons[t][n].setAsInputNeuron(0)}this.createConnections(0,this.layerCnt-1)}evaluate(t){if(t.length!=this.inputSize)throw"Input size does not match";return this.neurons.forEach(t=>{t.forEach(t=>t.reset())}),this.neurons[0].forEach((e,n)=>{e.setInput(t[n])}),this.neurons[this.layerCnt-1].forEach(t=>{t.calculateActivation()}),this.neurons[this.layerCnt-1].map(t=>t.getActivation())}addTrainingSet(t,e){if(t.length!=this.inputSize)throw"Input size does not match";if(e.length!=this.outputSize)throw"Output size does not match";this.trainSamples.push(new u(t,e))}getCost(){if(0==this.trainSamples.length)return 0;const t=this.trainSamples.reduce((t,e)=>(this.evaluate(e.input),t+this.neurons[this.layerCnt-1].reduce((t,n,i)=>t+Math.pow(n.getActivation()-e.output[i],2),0)),0);let e=0;switch(this.regType){case r.L1:e=a.cost(this.connections);break;case r.L2:e=o.cost(this.connections);break;case r.NONE:e=0}return.5*t*(1/this.trainSamples.length)+this.lambda*e}train(){this.trainSamples.forEach(t=>{this.evaluate(t.input),this.neurons[this.layerCnt-1].forEach((e,n)=>{const i=(t.output[n]-e.getActivation())*s.der(e.getActivation());e.setSigma(i)});for(let t=this.layerCnt-2;t>=0;t--)this.neurons[t].forEach(t=>{const e=t.getOutputs().reduce((t,e)=>t+e.getOutputNeuron().getSigma()*e.getWeight(),0)*s.der(t.getActivation());t.setSigma(e)});this.connections.forEach(t=>{t.forEach(t=>{let e=0;switch(this.regType){case r.L1:e=a.der(t.getWeight(),h(this.connections));break;case r.L2:e=o.der(t.getWeight(),h(this.connections));break;case r.NONE:e=0}const n=t.getOutputNeuron().getSigma()*t.getInputNeuron().getActivation()*this.rate-this.lambda*e;t.addSampleWeightChange(n)})})}),this.connections.forEach(t=>{t.forEach(t=>{t.applyAverageWeightChange()})}),this.iterCnt++}addOrRemoveLayer(t){if(t){const t=3;this.hiddenLayerSizes.push(t),this.layerCnt++,this.createLayerOfNeurons(this.layerCnt-2,t),this.createLayerOfNeurons(this.layerCnt-1,this.outputSize),this.createConnections(this.layerCnt-3,this.layerCnt-1)}else{if(2==this.layerCnt)return;this.hiddenLayerSizes.pop(),this.layerCnt--,this.neurons.pop(),this.connections.pop(),this.createLayerOfNeurons(this.layerCnt-1,this.outputSize),this.createConnections(this.layerCnt-2,this.layerCnt-1)}}addOrRemoveNeuron(t,e){const n=0==e,i=e==this.layerCnt-1,s=!n&&!i,r=t?1:-1;if(s?this.hiddenLayerSizes[e-1]+=r:n?(this.inputSize+=r,this.trainSamples=[]):(this.outputSize+=r,this.trainSamples=[]),t){let t;t=s?this.hiddenLayerSizes[e-1]-1:n?this.inputSize-1:this.outputSize-1;const r=new c(`Neuron${e}${t}`);if(this.neurons[e][t]=r,n&&r.setAsInputNeuron(0),!n){this.neurons[e-1].forEach(t=>{const n=new l(t,r);t.addOutput(n),r.addInput(n),this.connections[e-1].push(n)});const t=new l(this.biasNeuron,r);r.addInput(t),this.connections[e-1].push(t)}i||this.neurons[e+1].forEach(t=>{const n=new l(r,t);t.addInput(n),this.connections[e].push(n)})}else{const t=this.neurons[e].pop();n||this.neurons[e-1].forEach(e=>{e.setOutputs(e.getOutputs().filter(e=>e.getOutputNeuron().getName()!=t.getName()))}),i||this.neurons[e+1].forEach(e=>{e.setInputs(e.getInputs().filter(e=>e.getInputNeuron().getName()!=t.getName()))}),n||(this.connections[e-1]=this.connections[e-1].filter(e=>e.getOutputNeuron().getName()!=t.getName())),i||(this.connections[e]=this.connections[e].filter(e=>e.getInputNeuron().getName()!=t.getName()))}}reset(){this.iterCnt=0,this.createConnections(0,this.layerCnt-1)}createLayerOfNeurons(t,e){this.neurons[t]=[];for(let n=0;n<e;n++)this.neurons[t][n]=new c(`Neuron${t}${n}`)}createConnections(t,e){for(let n=t;n<e;n++)this.connections[n]=[],this.neurons[n+1].forEach(t=>{t.resetInputs()}),this.neurons[n].forEach(t=>{t.resetOutputs()}),this.neurons[n+1].forEach(t=>{this.neurons[n].forEach(e=>{const i=new l(e,t);e.addOutput(i),t.addInput(i),this.connections[n].push(i)});const e=new l(this.biasNeuron,t);t.addInput(e),this.connections[n].push(e)})}getNeurons(){return this.neurons}getConnections(){return this.connections}getInputSize(){return this.inputSize}getOutputSize(){return this.outputSize}getLayerCnt(){return this.layerCnt}getHiddenLayerSizes(){return this.hiddenLayerSizes}setRate(t){this.rate=t}getIteration(){return this.iterCnt}setRegularizationType(t){this.regType=t}setRegularizationRate(t){this.lambda=t}getTrainingSamples(){return this.trainSamples}setTrainingSamples(t){this.trainSamples=t}}(2,$,1)).addTrainingSet([1,1],[0]),g.addTrainingSet([1,0],[1]),g.addTrainingSet([0,1],[1]),g.addTrainingSet([0,0],[0]),(m=new Array(g.getInputSize())).fill(1),g.evaluate(m),M()},M=()=>{g.evaluate(m),d.draw(g.getNeurons(),g.getConnections());let t=A("Layers",g.getLayerCnt().toString(),"addOrRemoveLayer(true)","addOrRemoveLayer(false)");t+=A("Input size",g.getInputSize().toString(),"addOrRemoveNeuron(true, 0)","addOrRemoveNeuron(false, 0)");for(let e=0;e<g.getLayerCnt()-2;e++)t+=A("Hidden layer size",g.getHiddenLayerSizes()[e].toString(),`addOrRemoveNeuron(true, ${e+1})`,`addOrRemoveNeuron(false, ${e+1})`);t+=A("Output size",g.getOutputSize().toString(),`addOrRemoveNeuron(true, ${g.getLayerCnt()-1})`,`addOrRemoveNeuron(false, ${g.getLayerCnt()-1})`),y.innerHTML=t,f.innerHTML="",d.getDrawableInputNeurons()||d.draw(g.getNeurons(),g.getConnections());d.getDrawableInputNeurons().forEach(t=>{const e=t.x-50,n=t.y-25+5;f.innerHTML+=`<input\n      style="position: absolute; top: ${n}px; left: ${e}px; height: 50px;" \n      type="range" orient="vertical" min="0" max="1" value="${t.activation}" step="0.05" \n      oninput="slide(${t.id}, this.value);">`}),b.innerHTML=g.getIteration().toString(),S.innerHTML=g.getCost().toString();let e="";for(let t=0;t<g.getInputSize();t++)e+=`<th scope='col'>Input ${t}</th>`;for(let t=0;t<g.getOutputSize();t++)e+=`<th scope='col' style="text-align: right">Output ${t}</th>`;E.innerHTML=e;let n="";g.getTrainingSamples().forEach((t,e)=>{n+=`<tr style="cursor:pointer;" onclick="applyTrainingSample(${e})">`,t.input.forEach(t=>{n+=`<td>${t}</td>`}),t.output.forEach(t=>{n+=`<td style="text-align: right">${t}</td>`}),n+="</tr>"}),z.innerHTML=n},A=(t,e,n,i)=>`<tr><td align='right'><label>${t}:</label><b style="margin: auto 6px">${e}</b></td><td>\n  <div class="btn-group" role="group">\n    <button type="button" class="btn btn-secondary btn-sm" onclick="${i}">-</button>\n    <button type="button" class="btn btn-secondary btn-sm" onclick="${n}">+</button>\n  </div></td></tr>`}]);
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vd2VicGFjay9ib290c3RyYXAiLCJ3ZWJwYWNrOi8vLy4vc3JjL1Zpc3VhbGl6ZXIudHMiLCJ3ZWJwYWNrOi8vLy4vc3JjL25ldXJhbE5ldHdvcmsvSGVscGVyT2JqZWN0cy50cyIsIndlYnBhY2s6Ly8vLi9zcmMvbmV1cmFsTmV0d29yay9OZXVyb24udHMiLCJ3ZWJwYWNrOi8vLy4vc3JjL25ldXJhbE5ldHdvcmsvQ29ubmVjdGlvbi50cyIsIndlYnBhY2s6Ly8vLi9zcmMvaW5kZXgudHMiLCJ3ZWJwYWNrOi8vLy4vc3JjL25ldXJhbE5ldHdvcmsvTmV1cmFsQ29yZS50cyJdLCJuYW1lcyI6WyJpbnN0YWxsZWRNb2R1bGVzIiwiX193ZWJwYWNrX3JlcXVpcmVfXyIsIm1vZHVsZUlkIiwiZXhwb3J0cyIsIm1vZHVsZSIsImkiLCJsIiwibW9kdWxlcyIsImNhbGwiLCJtIiwiYyIsImQiLCJuYW1lIiwiZ2V0dGVyIiwibyIsIk9iamVjdCIsImRlZmluZVByb3BlcnR5IiwiZW51bWVyYWJsZSIsImdldCIsInIiLCJTeW1ib2wiLCJ0b1N0cmluZ1RhZyIsInZhbHVlIiwidCIsIm1vZGUiLCJfX2VzTW9kdWxlIiwibnMiLCJjcmVhdGUiLCJrZXkiLCJiaW5kIiwibiIsIm9iamVjdCIsInByb3BlcnR5IiwicHJvdG90eXBlIiwiaGFzT3duUHJvcGVydHkiLCJwIiwicyIsIkRyYXdhYmxlTmV1cm9uIiwiW29iamVjdCBPYmplY3RdIiwieCIsInkiLCJhY3RpdmF0aW9uIiwiaWQiLCJpc0JpYXMiLCJ0aGlzIiwiU0lHTU9JRCIsIm91dHB1dCIsIk1hdGgiLCJleHAiLCJkZXIiLCJSZWd1bGFyaXphdGlvbnMiLCJMMVJlZyIsImNvc3QiLCJjb25uZWN0aW9ucyIsInJlZHVjZSIsInByZXYiLCJjb25uTGF5ZXIiLCJhY2MiLCJjb25uIiwiYWJzIiwiZ2V0V2VpZ2h0IiwiZ2V0TnVtYmVyT2ZDb25uZWN0aW9ucyIsIndlaWdodCIsImNvbm5Db3VudCIsIkwyUmVnIiwicG93IiwiY3VycldlaWdodCIsIlRyYWluU2FtcGxlIiwiaW5wdXQiLCJsZW5ndGgiLCJOZXVyb25fTmV1cm9uIiwiaW5wdXRzIiwib3V0cHV0cyIsImlzSW5wdXQiLCJpc0NhbGN1bGF0ZWQiLCJzaWdtYSIsInB1c2giLCJjdXJyQ29ubiIsImNhbGN1bGF0ZVZhbHVlIiwiZ2V0QWN0aXZhdGlvbiIsIkNvbm5lY3Rpb24iLCJyYW5kb20iLCJzYW1wbGVXZWlnaHRDaGFuZ2VzIiwiaW5wdXROZXVyb24iLCJvdXRwdXROZXVyb24iLCJ3ZWlnaHRDaGFuZ2UiLCJjaGFuZ2UiLCJ2YWwiLCJjYWxjdWxhdGVBY3RpdmF0aW9uIiwid2luZG93Iiwic2xpZGUiLCJzcmNfaW5wdXQiLCJuZXVyYWxDb3JlIiwiZXZhbHVhdGUiLCJ2aXN1YWxpemVyIiwiZHJhdyIsImdldE5ldXJvbnMiLCJnZXRDb25uZWN0aW9ucyIsImFkZE9yUmVtb3ZlTGF5ZXIiLCJhZGQiLCJ1cGRhdGVVSSIsImFkZE9yUmVtb3ZlTmV1cm9uIiwibGF5ZXJJZHgiLCJwb3AiLCJ0cmFpbiIsIm11bHRpcGxlSXRlcnMiLCJpdGVycyIsIk51bWJlciIsInBhcnNlSW50IiwiaXRlcnNJbnB1dCIsInNldFJhdGUiLCJwYXJzZUZsb2F0IiwicmF0ZUlucHV0IiwicmVnVHlwZUlucHV0Iiwic2V0UmVndWxhcml6YXRpb25UeXBlIiwiTDEiLCJMMiIsIk5PTkUiLCJzZXRSZWd1bGFyaXphdGlvblJhdGUiLCJyZWdSYXRlSW5wdXQiLCJ0cmFpblJlcGVhdCIsImNoZWNrZWQiLCJpbnRlcnZhbCIsInRyYWluQnRuIiwiaW5uZXJUZXh0Iiwic2V0SW50ZXJ2YWwiLCJydW5UcmFpbkxvb3AiLCJjbGVhckludGVydmFsIiwic2V0VHJhaW5pbmdEYXRhIiwiZGF0YUFyciIsIkpTT04iLCJwYXJzZSIsInRyYWluaW5nU2V0SW5wdXQiLCJzZXRUcmFpbmluZ1NhbXBsZXMiLCJmb3JFYWNoIiwic2FtcGxlIiwiYWRkVHJhaW5pbmdTZXQiLCJyZXNldCIsImVyciIsImFsZXJ0IiwiYXBwbHlUcmFpbmluZ1NhbXBsZSIsImlkeCIsImdldFRyYWluaW5nU2FtcGxlcyIsIm9ubG9hZCIsIm1haW4iLCJsYXllckNvbnRyb2xzIiwiaW5wdXRDb250cm9scyIsImNhbnZhcyIsIml0ZXIiLCJ0cmFpbmluZ1NldExhYmVsc091dHB1dCIsInRyYWluaW5nU2V0RGF0YU91dHB1dCIsImhpZGRlblNpemVzIiwiZG9jdW1lbnQiLCJnZXRFbGVtZW50QnlJZCIsImNvbnRlbnQiLCJjdHgiLCJnZXRDb250ZXh0IiwiaGVpZ2h0Iiwid2lkdGgiLCJuZXVyb25zIiwiY2xlYXJSZWN0IiwiZHJhd2FibGVOZXVyb25zIiwiZHJhd2FibGVJbnB1dE5ldXJvbnMiLCJsZWZ0TWFyZ2luIiwibGF5ZXIiLCJsSWR4IiwidG9wTWFyZ2luIiwibmV1cm9uIiwibklkeCIsImRyYXdhYmxlTmV1cm9uIiwiZ2V0TmFtZSIsImRyYXdhYmxlTmFtZU1hcCIsIk1hcCIsInNldCIsImNvbm5lY3Rpb24iLCJpbnB1dE5OYW1lIiwiZ2V0SW5wdXROZXVyb24iLCJnZXRJc0JpYXMiLCJkcmF3Q29ubmVjdGlvbiIsImdldE91dHB1dE5ldXJvbiIsImRyYXdOZXVyb24iLCJiZWdpblBhdGgiLCJhcmMiLCJQSSIsImZpbGxTdHlsZSIsImZpbGwiLCJzdHJva2VTdHlsZSIsImxpbmVXaWR0aCIsInN0cm9rZSIsImZvbnQiLCJ0ZXh0IiwidG9GaXhlZCIsImZpbGxUZXh0IiwibWVhc3VyZVRleHQiLCJsb2ciLCJtb3ZlVG8iLCJsaW5lVG8iLCJjbG9zZVBhdGgiLCJpbml0Q29yZSIsImlucHV0U2l6ZSIsImhpZGRlbkxheWVyU2l6ZXMiLCJvdXRwdXRTaXplIiwiaXRlckNudCIsInJhdGUiLCJsYW1iZGEiLCJyZWdUeXBlIiwiYmlhc05ldXJvbiIsInRyYWluU2FtcGxlcyIsImxheWVyQ250IiwiaW5pdCIsIm5ldXJvbnNJbkxheWVyQ250Iiwic2V0QXNJbnB1dE5ldXJvbiIsImNyZWF0ZUNvbm5lY3Rpb25zIiwic2V0SW5wdXQiLCJtYXAiLCJjb3N0U3VtIiwicmVnQ29zdCIsIm5ld1NpZ21hIiwic2V0U2lnbWEiLCJnZXRPdXRwdXRzIiwiZ2V0U2lnbWEiLCJyZWdEZXIiLCJhZGRTYW1wbGVXZWlnaHRDaGFuZ2UiLCJhcHBseUF2ZXJhZ2VXZWlnaHRDaGFuZ2UiLCJuZXdMYXllclNpemUiLCJjcmVhdGVMYXllck9mTmV1cm9ucyIsImlzT3V0cHV0IiwiaXNIaWRkZW4iLCJzaXplQ2hhbmdlIiwibmV3TmV1cm9uSWR4IiwibmV3TmV1cm9uIiwiYWRkT3V0cHV0IiwiYWRkSW5wdXQiLCJyZW1vdmVkTmV1cm9uIiwic2V0T3V0cHV0cyIsImZpbHRlciIsInNldElucHV0cyIsImdldElucHV0cyIsImxheWVyU2l6ZSIsImZpcnN0TGF5ZXIiLCJsYXN0TGF5ZXIiLCJuZXh0TmV1cm9uIiwicmVzZXRJbnB1dHMiLCJyZXNldE91dHB1dHMiLCJjdXJyTmV1cm9uIiwiYmlhc0Nvbm5lY3Rpb24iLCJuZXdSYXRlIiwic2FtcGxlcyIsIkFycmF5IiwiZ2V0SW5wdXRTaXplIiwiYWRkTGF5ZXJDb250cm9sUm93IiwiZ2V0TGF5ZXJDbnQiLCJ0b1N0cmluZyIsImdldEhpZGRlbkxheWVyU2l6ZXMiLCJnZXRPdXRwdXRTaXplIiwiaW5uZXJIVE1MIiwiZ2V0RHJhd2FibGVJbnB1dE5ldXJvbnMiLCJjb250cm9sSGVpZ2h0IiwiZ2V0SXRlcmF0aW9uIiwiZ2V0Q29zdCIsImxhYmVscyIsInRyYWluaW5nRGF0YSIsImxhYmVsIiwic2l6ZSIsIm9uY2xpY2tQb3MiLCJvbmNsaWNrTmVnIl0sIm1hcHBpbmdzIjoiYUFDQSxJQUFBQSxLQUdBLFNBQUFDLEVBQUFDLEdBR0EsR0FBQUYsRUFBQUUsR0FDQSxPQUFBRixFQUFBRSxHQUFBQyxRQUdBLElBQUFDLEVBQUFKLEVBQUFFLElBQ0FHLEVBQUFILEVBQ0FJLEdBQUEsRUFDQUgsWUFVQSxPQU5BSSxFQUFBTCxHQUFBTSxLQUFBSixFQUFBRCxRQUFBQyxJQUFBRCxRQUFBRixH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SXVGLEVBQVc2SixlQUFnQnBQLElBQzdDK1AsNEJBQW1DL1AsU0FFckMsSUFBSyxJQUFJQSxFQUFJLEVBQUdBLEVBQUl1RixFQUFXa0ssZ0JBQWlCelAsSUFDOUMrUCx1REFBOEQvUCxTQUVoRWdKLEVBQXdCMEcsVUFBWUssRUFHcEMsSUFBSUMsRUFBZSxHQUNuQnpLLEVBQVdrRCxxQkFBcUJSLFFBQVEsQ0FBQ0MsRUFBUU0sS0FDL0N3SCwrREFBNEV4SCxPQUM1RU4sRUFBT25FLE1BQU1rRSxRQUFRL0MsSUFDbkI4SyxVQUF1QjlLLFdBRXpCZ0QsRUFBT3pGLE9BQU93RixRQUFRL0MsSUFDcEI4SyxvQ0FBaUQ5SyxXQUVuRDhLLEdBQWdCLFVBRWxCL0csRUFBc0J5RyxVQUFZTSxHQUc5QlgsRUFBcUIsQ0FBQ1ksRUFBZUMsRUFBY0MsRUFBb0JDLG9DQUNwQ0gseUNBQTZDQywrSEFFaEJFLHNGQUNBRCIsImZpbGUiOiJtYWluLmpzIiwic291cmNlc0NvbnRlbnQiOlsiIFx0Ly8gVGhlIG1vZHVsZSBjYWNoZVxuIFx0dmFyIGluc3RhbGxlZE1vZHVsZXMgPSB7fTtcblxuIFx0Ly8gVGhlIHJlcXVpcmUgZnVuY3Rpb25cbiBcdGZ1bmN0aW9uIF9fd2VicGFja19yZXF1aXJlX18obW9kdWxlSWQpIHtcblxuIFx0XHQvLyBDaGVjayBpZiBtb2R1bGUgaXMgaW4gY2FjaGVcbiBcdFx0aWYoaW5zdGFsbGVkTW9kdWxlc1ttb2R1bGVJZF0pIHtcbiBcdFx0XHRyZXR1cm4gaW5zdGFsbGVkTW9kdWxlc1ttb2R1bGVJZF0uZXhwb3J0cztcbiBcdFx0fVxuIFx0XHQvLyBDcmVhdGUgYSBuZXcgbW9kdWxlIChhbmQgcHV0IGl0IGludG8gdGhlIGNhY2hlKVxuIFx0XHR2YXIgbW9kdWxlID0gaW5zdGFsbGVkTW9kdWxlc1ttb2R1bGVJZF0gPSB7XG4gXHRcdFx0aTogbW9kdWxlSWQsXG4gXHRcdFx0bDogZmFsc2UsXG4gXHRcdFx0ZXhwb3J0czoge31cbiBcdFx0fTtcblxuIFx0XHQvLyBFeGVjdXRlIHRoZSBtb2R1bGUgZnVuY3Rpb25cbiBcdFx0bW9kdWxlc1ttb2R1bGVJZF0uY2FsbChtb2R1bGUuZXhwb3J0cywgbW9kdWxlLCBtb2R1bGUuZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXyk7XG5cbiBcdFx0Ly8gRmxhZyB0aGUgbW9kdWxlIGFzIGxvYWRlZFxuIFx0XHRtb2R1bGUubCA9IHRydWU7XG5cbiBcdFx0Ly8gUmV0dXJuIHRoZSBleHBvcnRzIG9mIHRoZSBtb2R1bGVcbiBcdFx0cmV0dXJuIG1vZHVsZS5leHBvcnRzO1xuIFx0fVxuXG5cbiBcdC8vIGV4cG9zZSB0aGUgbW9kdWxlcyBvYmplY3QgKF9fd2VicGFja19tb2R1bGVzX18pXG4gXHRfX3dlYnBhY2tfcmVxdWlyZV9fLm0gPSBtb2R1bGVzO1xuXG4gXHQvLyBleHBvc2UgdGhlIG1vZHVsZSBjYWNoZVxuIFx0X193ZWJwYWNrX3JlcXVpcmVfXy5jID0gaW5zdGFsbGVkTW9kdWxlcztcblxuIFx0Ly8gZGVmaW5lIGdldHRlciBmdW5jdGlvbiBmb3IgaGFybW9ueSBleHBvcnRzXG4gXHRfX3dlYnBhY2tfcmVxdWlyZV9fLmQgPSBmdW5jdGlvbihleHBvcnRzLCBuYW1lLCBnZXR0ZXIpIHtcbiBcdFx0aWYoIV9fd2VicGFja19yZXF1aXJlX18ubyhleHBvcnRzLCBuYW1lKSkge1xuIFx0XHRcdE9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBuYW1lLCB7IGVudW1lcmFibGU6IHRydWUsIGdldDogZ2V0dGVyIH0pO1xuIFx0XHR9XG4gXHR9O1xuXG4gXHQvLyBkZWZpbmUgX19lc01vZHVsZSBvbiBleHBvcnRzXG4gXHRfX3dlYnBhY2tfcmVxdWlyZV9fLnIgPSBmdW5jdGlvbihleHBvcnRzKSB7XG4gXHRcdGlmKHR5cGVvZiBTeW1ib2wgIT09ICd1bmRlZmluZWQnICYmIFN5bWJvbC50b1N0cmluZ1RhZykge1xuIFx0XHRcdE9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBTeW1ib2wudG9TdHJpbmdUYWcsIHsgdmFsdWU6ICdNb2R1bGUnIH0pO1xuIFx0XHR9XG4gXHRcdE9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCAnX19lc01vZHVsZScsIHsgdmFsdWU6IHRydWUgfSk7XG4gXHR9O1xuXG4gXHQvLyBjcmVhdGUgYSBmYWtlIG5hbWVzcGFjZSBvYmplY3RcbiBcdC8vIG1vZGUgJiAxOiB2YWx1ZSBpcyBhIG1vZHVsZSBpZCwgcmVxdWlyZSBpdFxuIFx0Ly8gbW9kZSAmIDI6IG1lcmdlIGFsbCBwcm9wZXJ0aWVzIG9mIHZhbHVlIGludG8gdGhlIG5zXG4gXHQvLyBtb2RlICYgNDogcmV0dXJuIHZhbHVlIHdoZW4gYWxyZWFkeSBucyBvYmplY3RcbiBcdC8vIG1vZGUgJiA4fDE6IGJlaGF2ZSBsaWtlIHJlcXVpcmVcbiBcdF9fd2VicGFja19yZXF1aXJlX18udCA9IGZ1bmN0aW9uKHZhbHVlLCBtb2RlKSB7XG4gXHRcdGlmKG1vZGUgJiAxKSB2YWx1ZSA9IF9fd2VicGFja19yZXF1aXJlX18odmFsdWUpO1xuIFx0XHRpZihtb2RlICYgOCkgcmV0dXJuIHZhbHVlO1xuIFx0XHRpZigobW9kZSAmIDQpICYmIHR5cGVvZiB2YWx1ZSA9PT0gJ29iamVjdCcgJiYgdmFsdWUgJiYgdmFsdWUuX19lc01vZHVsZSkgcmV0dXJuIHZhbHVlO1xuIFx0XHR2YXIgbnMgPSBPYmplY3QuY3JlYXRlKG51bGwpO1xuIFx0XHRfX3dlYnBhY2tfcmVxdWlyZV9fLnIobnMpO1xuIFx0XHRPYmplY3QuZGVmaW5lUHJvcGVydHkobnMsICdkZWZhdWx0JywgeyBlbnVtZXJhYmxlOiB0cnVlLCB2YWx1ZTogdmFsdWUgfSk7XG4gXHRcdGlmKG1vZGUgJiAyICYmIHR5cGVvZiB2YWx1ZSAhPSAnc3RyaW5nJykgZm9yKHZhciBrZXkgaW4gdmFsdWUpIF9fd2VicGFja19yZXF1aXJlX18uZChucywga2V5LCBmdW5jdGlvbihrZXkpIHsgcmV0dXJuIHZhbHVlW2tleV07IH0uYmluZChudWxsLCBrZXkpKTtcbiBcdFx0cmV0dXJuIG5zO1xuIFx0fTtcblxuIFx0Ly8gZ2V0RGVmYXVsdEV4cG9ydCBmdW5jdGlvbiBmb3IgY29tcGF0aWJpbGl0eSB3aXRoIG5vbi1oYXJtb255IG1vZHVsZXNcbiBcdF9fd2VicGFja19yZXF1aXJlX18ubiA9IGZ1bmN0aW9uKG1vZHVsZSkge1xuIFx0XHR2YXIgZ2V0dGVyID0gbW9kdWxlICYmIG1vZHVsZS5fX2VzTW9kdWxlID9cbiBcdFx0XHRmdW5jdGlvbiBnZXREZWZhdWx0KCkgeyByZXR1cm4gbW9kdWxlWydkZWZhdWx0J107IH0gOlxuIFx0XHRcdGZ1bmN0aW9uIGdldE1vZHVsZUV4cG9ydHMoKSB7IHJldHVybiBtb2R1bGU7IH07XG4gXHRcdF9fd2VicGFja19yZXF1aXJlX18uZChnZXR0ZXIsICdhJywgZ2V0dGVyKTtcbiBcdFx0cmV0dXJuIGdldHRlcjtcbiBcdH07XG5cbiBcdC8vIE9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHkuY2FsbFxuIFx0X193ZWJwYWNrX3JlcXVpcmVfXy5vID0gZnVuY3Rpb24ob2JqZWN0LCBwcm9wZXJ0eSkgeyByZXR1cm4gT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eS5jYWxsKG9iamVjdCwgcHJvcGVydHkpOyB9O1xuXG4gXHQvLyBfX3dlYnBhY2tfcHVibGljX3BhdGhfX1xuIFx0X193ZWJwYWNrX3JlcXVpcmVfXy5wID0gXCJcIjtcblxuXG4gXHQvLyBMb2FkIGVudHJ5IG1vZHVsZSBhbmQgcmV0dXJuIGV4cG9ydHNcbiBcdHJldHVybiBfX3dlYnBhY2tfcmVxdWlyZV9fKF9fd2VicGFja19yZXF1aXJlX18ucyA9IDApO1xuIiwiaW1wb3J0IHsgTmV1cm9uIH0gZnJvbSBcIi4vbmV1cmFsTmV0d29yay9OZXVyb25cIjtcbmltcG9ydCB7IENvbm5lY3Rpb24gfSBmcm9tIFwiLi9uZXVyYWxOZXR3b3JrL0Nvbm5lY3Rpb25cIjtcblxuZXhwb3J0IGNsYXNzIERyYXdhYmxlTmV1cm9uIHtcbiAgcHVibGljIHg6IG51bWJlcjtcbiAgcHVibGljIHk6IG51bWJlcjtcbiAgcHVibGljIGFjdGl2YXRpb246IG51bWJlcjtcbiAgcHVibGljIG5hbWU6IHN0cmluZztcbiAgcHVibGljIGlzQmlhczogYm9vbGVhbjtcbiAgcHVibGljIGlkOiBudW1iZXI7XG5cbiAgY29uc3RydWN0b3IoeCwgeSwgYWN0aXZhdGlvbiwgbmFtZSwgaWQsIGlzQmlhcyA9IGZhbHNlKSB7XG4gICAgdGhpcy54ID0geDtcbiAgICB0aGlzLnkgPSB5O1xuICAgIHRoaXMuYWN0aXZhdGlvbiA9IGFjdGl2YXRpb247XG4gICAgdGhpcy5uYW1lID0gbmFtZTtcbiAgICB0aGlzLmlzQmlhcyA9IGlzQmlhcztcbiAgICB0aGlzLmlkID0gaWQ7XG4gIH1cbn1cblxuZXhwb3J0IGNsYXNzIFZpc3VhbGl6ZXIge1xuXG4gIHByaXZhdGUgY29udGVudDogSFRNTENhbnZhc0VsZW1lbnQ7XG4gIHByaXZhdGUgY3R4OiBDYW52YXNSZW5kZXJpbmdDb250ZXh0MkQ7XG4gIHByaXZhdGUgaGVpZ2h0OiBudW1iZXI7XG4gIHByaXZhdGUgd2lkdGg6IG51bWJlcjtcbiAgcHJpdmF0ZSBkcmF3YWJsZU5ldXJvbnM6IERyYXdhYmxlTmV1cm9uW107XG4gIHByaXZhdGUgZHJhd2FibGVJbnB1dE5ldXJvbnM6IERyYXdhYmxlTmV1cm9uW107XG5cbiAgY29uc3RydWN0b3IoY29udGVudDogSFRNTENhbnZhc0VsZW1lbnQpIHtcbiAgICB0aGlzLmNvbnRlbnQgPSBjb250ZW50O1xuICAgIHRoaXMuY3R4ID0gY29udGVudC5nZXRDb250ZXh0KCcyZCcpO1xuICAgIHRoaXMuaGVpZ2h0ID0gY29udGVudC5oZWlnaHQ7XG4gICAgdGhpcy53aWR0aCA9IGNvbnRlbnQud2lkdGg7XG4gIH1cblxuICBwdWJsaWMgZHJhdyhuZXVyb25zOiBOZXVyb25bXVtdLCBjb25uZWN0aW9uczogQ29ubmVjdGlvbltdW10pIHtcbiAgICB0aGlzLmN0eC5jbGVhclJlY3QoMCwgMCwgdGhpcy53aWR0aCwgdGhpcy5oZWlnaHQpO1xuXG4gICAgdGhpcy5kcmF3YWJsZU5ldXJvbnMgPSBbXTtcbiAgICB0aGlzLmRyYXdhYmxlSW5wdXROZXVyb25zID0gW107XG4gICAgY29uc3QgbGVmdE1hcmdpbiA9IHRoaXMud2lkdGggLyAobmV1cm9ucy5sZW5ndGggKyAxKTtcblxuICAgIC8vIE5ldXJvbnNcbiAgICBuZXVyb25zLmZvckVhY2goKGxheWVyLCBsSWR4KSA9PiB7XG4gICAgICBjb25zdCB0b3BNYXJnaW4gPSB0aGlzLmhlaWdodCAvIChsYXllci5sZW5ndGggKyAyKTtcbiAgICAgIGxheWVyLmZvckVhY2goKG5ldXJvbiwgbklkeCkgPT4ge1xuICAgICAgICBjb25zdCB4ID0gbGVmdE1hcmdpbiAqICgxICsgbElkeCk7XG4gICAgICAgIGNvbnN0IHkgPSB0b3BNYXJnaW4gKiAoMSArIG5JZHgpO1xuXG4gICAgICAgIGNvbnN0IGRyYXdhYmxlTmV1cm9uID0gbmV3IERyYXdhYmxlTmV1cm9uKHgsIHksIG5ldXJvbi5nZXRBY3RpdmF0aW9uKCksIG5ldXJvbi5nZXROYW1lKCksIG5JZHgpO1xuICAgICAgICB0aGlzLmRyYXdhYmxlTmV1cm9ucy5wdXNoKGRyYXdhYmxlTmV1cm9uKTtcblxuICAgICAgICBpZiAobElkeCA9PT0gMCkge1xuICAgICAgICAgIHRoaXMuZHJhd2FibGVJbnB1dE5ldXJvbnMucHVzaChkcmF3YWJsZU5ldXJvbik7XG4gICAgICAgIH1cbiAgICAgIH0pO1xuXG4gICAgICBpZiAobElkeCAhPSBuZXVyb25zLmxlbmd0aCAtIDEpIHtcbiAgICAgICAgY29uc3QgeCA9IGxlZnRNYXJnaW4gKiAoMSArIGxJZHgpO1xuICAgICAgICBjb25zdCB5ID0gdG9wTWFyZ2luICogKDEgKyBuZXVyb25zW2xJZHhdLmxlbmd0aCk7XG5cbiAgICAgICAgY29uc3QgZHJhd2FibGVOZXVyb24gPSBuZXcgRHJhd2FibGVOZXVyb24oeCwgeSwgMSwgYGJpYXMke2xJZHh9YCwgbmV1cm9uc1tsSWR4XS5sZW5ndGgsIHRydWUpO1xuICAgICAgICB0aGlzLmRyYXdhYmxlTmV1cm9ucy5wdXNoKGRyYXdhYmxlTmV1cm9uKTtcbiAgICAgIH1cbiAgICB9KTtcblxuICAgIC8vIENvbm5lY3Rpb25zXG4gICAgY29uc3QgZHJhd2FibGVOYW1lTWFwID0gbmV3IE1hcDxzdHJpbmcsIERyYXdhYmxlTmV1cm9uPigpO1xuICAgIHRoaXMuZHJhd2FibGVOZXVyb25zLmZvckVhY2goXG4gICAgICAoZHJhd2FibGVOZXVyb24pID0+IGRyYXdhYmxlTmFtZU1hcC5zZXQoZHJhd2FibGVOZXVyb24ubmFtZSwgZHJhd2FibGVOZXVyb24pLy8gV1RGLCBJIHdhcyBub3QgYWJsZSB0byBjcmVhdGUgbWFwIGZyb20gMmQgYXJyXG4gICAgKTtcblxuICAgIGNvbm5lY3Rpb25zLmZvckVhY2goKGxheWVyLCBsSWR4KSA9PiB7XG4gICAgICBsYXllci5mb3JFYWNoKChjb25uZWN0aW9uKSA9PiB7XG4gICAgICAgIGNvbnN0IGlucHV0Tk5hbWUgPVxuICAgICAgICAgIChjb25uZWN0aW9uLmdldElucHV0TmV1cm9uKCkuZ2V0SXNCaWFzKCkpID9cbiAgICAgICAgICAgIGBiaWFzJHtsSWR4fWAgOlxuICAgICAgICAgICAgY29ubmVjdGlvbi5nZXRJbnB1dE5ldXJvbigpLmdldE5hbWUoKTtcblxuICAgICAgICB0aGlzLmRyYXdDb25uZWN0aW9uKFxuICAgICAgICAgIGRyYXdhYmxlTmFtZU1hcC5nZXQoaW5wdXROTmFtZSksXG4gICAgICAgICAgZHJhd2FibGVOYW1lTWFwLmdldChjb25uZWN0aW9uLmdldE91dHB1dE5ldXJvbigpLmdldE5hbWUoKSksXG4gICAgICAgICAgY29ubmVjdGlvbi5nZXRXZWlnaHQoKVxuICAgICAgICApO1xuICAgICAgfSk7XG4gICAgfSk7XG5cbiAgICB0aGlzLmRyYXdhYmxlTmV1cm9ucy5mb3JFYWNoKChuZXVyb24pID0+IHtcbiAgICAgIHRoaXMuZHJhd05ldXJvbihuZXVyb24pO1xuICAgIH0pO1xuICB9XG5cbiAgcHJpdmF0ZSBkcmF3TmV1cm9uKGRyYXdhYmxlTmV1cm9uOiBEcmF3YWJsZU5ldXJvbikge1xuICAgIC8vIHdoaXRlIGJhY2tncm91bmRcbiAgICB0aGlzLmN0eC5iZWdpblBhdGgoKTtcbiAgICB0aGlzLmN0eC5hcmMoZHJhd2FibGVOZXVyb24ueCwgZHJhd2FibGVOZXVyb24ueSwgMjUsIDAsIDIgKiBNYXRoLlBJKTtcbiAgICB0aGlzLmN0eC5maWxsU3R5bGUgPSBgcmdiKDI1NSwyNTUsMjU1KWA7XG4gICAgdGhpcy5jdHguZmlsbCgpO1xuXG4gICAgdGhpcy5jdHguYmVnaW5QYXRoKCk7XG4gICAgaWYgKGRyYXdhYmxlTmV1cm9uLmlzQmlhcylcbiAgICAgIHRoaXMuY3R4LmZpbGxTdHlsZSA9IGByZ2JhKDQ2LDQwLDQyLCAxKWA7XG4gICAgZWxzZVxuICAgICAgdGhpcy5jdHguZmlsbFN0eWxlID0gYHJnYmEoNjEsIDIzMiwgMjU1LCAke2RyYXdhYmxlTmV1cm9uLmFjdGl2YXRpb259KWA7XG4gICAgdGhpcy5jdHguc3Ryb2tlU3R5bGUgPSBgcmdiKDQ2LDQwLDQyLCAxKWBcbiAgICB0aGlzLmN0eC5saW5lV2lkdGggPSAxO1xuICAgIHRoaXMuY3R4LmFyYyhkcmF3YWJsZU5ldXJvbi54LCBkcmF3YWJsZU5ldXJvbi55LCAyNSwgMCwgMiAqIE1hdGguUEkpO1xuICAgIHRoaXMuY3R4LmZpbGwoKTtcbiAgICB0aGlzLmN0eC5zdHJva2UoKTtcblxuICAgIHRoaXMuY3R4LmZpbGxTdHlsZSA9IGByZ2IoNDYsNDAsNDIsIDEpYFxuICAgIGNvbnN0IGhlaWdodCA9IDE2O1xuICAgIHRoaXMuY3R4LmZvbnQgPSBgYm9sZCAke2hlaWdodH1weCBzZXJpZmA7XG4gICAgY29uc3QgdGV4dCA9IE51bWJlcihkcmF3YWJsZU5ldXJvbi5hY3RpdmF0aW9uKS50b0ZpeGVkKDIpO1xuICAgIHRoaXMuY3R4LmZpbGxUZXh0KFxuICAgICAgdGV4dCxcbiAgICAgIGRyYXdhYmxlTmV1cm9uLnggLSB0aGlzLmN0eC5tZWFzdXJlVGV4dCh0ZXh0KS53aWR0aCAvIDIsXG4gICAgICBkcmF3YWJsZU5ldXJvbi55ICsgaGVpZ2h0IC8gMyk7XG4gIH1cblxuICBwcml2YXRlIGRyYXdDb25uZWN0aW9uKGlucHV0TmV1cm9uOiBEcmF3YWJsZU5ldXJvbiwgb3V0cHV0TmV1cm9uOiBEcmF3YWJsZU5ldXJvbiwgd2VpZ2h0OiBudW1iZXIpIHtcbiAgICB0aGlzLmN0eC5iZWdpblBhdGgoKTtcbiAgICB0aGlzLmN0eC5saW5lV2lkdGggPSBNYXRoLmxvZygxLjAwMSArIE1hdGguYWJzKHdlaWdodCkpO1xuICAgIHRoaXMuY3R4LnN0cm9rZVN0eWxlID0gKHdlaWdodCA+IDApID9cbiAgICAgIGByZ2JhKDYxLCAyMzIsIDI1NSwgMSlgIDpcbiAgICAgIGByZ2JhKDIwNSwgODMsIDUyLCAxKWA7XG4gICAgdGhpcy5jdHgubW92ZVRvKGlucHV0TmV1cm9uLngsIGlucHV0TmV1cm9uLnkpO1xuICAgIHRoaXMuY3R4LmxpbmVUbyhvdXRwdXROZXVyb24ueCwgb3V0cHV0TmV1cm9uLnkpO1xuICAgIHRoaXMuY3R4LmNsb3NlUGF0aCgpO1xuICAgIHRoaXMuY3R4LnN0cm9rZSgpO1xuICB9XG5cbiAgcHVibGljIGdldERyYXdhYmxlSW5wdXROZXVyb25zKCkge1xuICAgIHJldHVybiB0aGlzLmRyYXdhYmxlSW5wdXROZXVyb25zO1xuICB9XG59XG4iLCJpbXBvcnQgeyBDb25uZWN0aW9uIH0gZnJvbSBcIi4vQ29ubmVjdGlvblwiO1xuXG5leHBvcnQgaW50ZXJmYWNlIEFjdGl2YXRpb24ge1xuICBkZXIoeDogbnVtYmVyKTogbnVtYmVyO1xuICBvdXRwdXQoeDogbnVtYmVyKTogbnVtYmVyO1xufTtcblxuZXhwb3J0IGNvbnN0IFNJR01PSUQ6IEFjdGl2YXRpb24gPSB7XG4gIG91dHB1dDogKHg6IG51bWJlcik6IG51bWJlciA9PiAxIC8gKDEgKyBNYXRoLmV4cCgteCkpLFxuICBkZXI6ICh4OiBudW1iZXIpOiBudW1iZXIgPT4ge1xuICAgIGxldCBvdXRwdXQgPSBTSUdNT0lELm91dHB1dCh4KTtcbiAgICByZXR1cm4gb3V0cHV0ICogKDEgLSBvdXRwdXQpO1xuICB9XG59O1xuXG5leHBvcnQgZW51bSBSZWd1bGFyaXphdGlvbnMge1xuICBMMSxcbiAgTDIsXG4gIE5PTkUsXG59XG5cbmV4cG9ydCBjb25zdCBMMVJlZyA9IHtcbiAgY29zdDogKGNvbm5lY3Rpb25zOiBDb25uZWN0aW9uW11bXSk6IG51bWJlciA9PiB7XG4gICAgcmV0dXJuIGNvbm5lY3Rpb25zLnJlZHVjZShcbiAgICAgIChwcmV2LCBjb25uTGF5ZXI6IENvbm5lY3Rpb25bXSkgPT4ge1xuICAgICAgICByZXR1cm4gcHJldiArIGNvbm5MYXllci5yZWR1Y2UoKGFjYywgY29ubikgPT4gYWNjICsgTWF0aC5hYnMoY29ubi5nZXRXZWlnaHQoKSksIDApXG4gICAgICB9LCAwKSAqICgxIC8gZ2V0TnVtYmVyT2ZDb25uZWN0aW9ucyhjb25uZWN0aW9ucykpO1xuICB9LFxuXG4gIGRlcjogKHdlaWdodDogbnVtYmVyLCBjb25uQ291bnQ6IG51bWJlcik6IG51bWJlciA9PiB7XG4gICAgcmV0dXJuICgod2VpZ2h0ID4gMCkgPyAxIDogLTEpICAqICgxIC8gY29ubkNvdW50KTtcbiAgfVxufVxuXG5leHBvcnQgY29uc3QgTDJSZWcgPSB7XG4gIGNvc3Q6IChjb25uZWN0aW9uczogQ29ubmVjdGlvbltdW10pOiBudW1iZXIgPT4ge1xuICAgIHJldHVybiAxIC8gMiAqIGNvbm5lY3Rpb25zLnJlZHVjZShcbiAgICAgIChwcmV2LCBjb25uTGF5ZXI6IENvbm5lY3Rpb25bXSkgPT4ge1xuICAgICAgICByZXR1cm4gcHJldiArIGNvbm5MYXllci5yZWR1Y2UoKGFjYywgY29ubikgPT4gYWNjICsgY29ubi5nZXRXZWlnaHQoKSAqKiAyLCAwKVxuICAgICAgfSwgMCkgKiAoMSAvIGdldE51bWJlck9mQ29ubmVjdGlvbnMoY29ubmVjdGlvbnMpKTtcbiAgfSxcblxuICBkZXI6IChjdXJyV2VpZ2h0OiBudW1iZXIsIGNvbm5Db3VudDogbnVtYmVyKTogbnVtYmVyID0+IHtcbiAgICByZXR1cm4gY3VycldlaWdodCAqICgxIC8gY29ubkNvdW50KTtcbiAgfVxufVxuXG5leHBvcnQgY2xhc3MgVHJhaW5TYW1wbGUge1xuICBwdWJsaWMgaW5wdXQ6IG51bWJlcltdO1xuICBwdWJsaWMgb3V0cHV0OiBudW1iZXJbXTtcblxuICBjb25zdHJ1Y3RvcihpbnB1dDogbnVtYmVyW10sIG91dHB1dDogbnVtYmVyW10pIHtcbiAgICB0aGlzLmlucHV0ID0gaW5wdXQ7XG4gICAgdGhpcy5vdXRwdXQgPSBvdXRwdXQ7XG4gIH1cbn1cblxuZXhwb3J0IGNvbnN0IGdldE51bWJlck9mQ29ubmVjdGlvbnMgPSAoY29ubmVjdGlvbnM6IENvbm5lY3Rpb25bXVtdKTogbnVtYmVyID0+IHtcbiAgcmV0dXJuIGNvbm5lY3Rpb25zLnJlZHVjZSgoYWNjLCBjb25uKSA9PiBhY2MgKyBjb25uLmxlbmd0aCwgMCk7XG59IiwiaW1wb3J0IHsgQ29ubmVjdGlvbiB9IGZyb20gXCIuL0Nvbm5lY3Rpb25cIjtcbmltcG9ydCB7IFNJR01PSUQgfSBmcm9tIFwiLi9IZWxwZXJPYmplY3RzXCI7XG5cbmV4cG9ydCBjbGFzcyBOZXVyb24ge1xuICBwcml2YXRlIG5hbWU6IHN0cmluZztcblxuICBwcml2YXRlIGFjdGl2YXRpb246IG51bWJlcjtcbiAgcHJpdmF0ZSBpbnB1dHM6IENvbm5lY3Rpb25bXSA9IFtdO1xuICBwcml2YXRlIG91dHB1dHM6IENvbm5lY3Rpb25bXSA9IFtdO1xuXG4gIC8vIFRoZSBkZXJpdmF0aW9uIG9mIEMgd2l0aCByZXNwZWN0IHRvIHpcbiAgcHJpdmF0ZSBzaWdtYTogbnVtYmVyO1xuICBwcml2YXRlIGlzSW5wdXQ6IGJvb2xlYW4gPSBmYWxzZTtcbiAgcHJpdmF0ZSBpc0NhbGN1bGF0ZWQ6IGJvb2xlYW4gPSBmYWxzZTtcbiAgcHJpdmF0ZSBpc0JpYXM6IGJvb2xlYW4gPSBmYWxzZTtcblxuICBjb25zdHJ1Y3RvcihuYW1lOiBzdHJpbmcsIGlzQmlhcyA9IGZhbHNlKSB7XG4gICAgdGhpcy5uYW1lID0gbmFtZTtcbiAgICB0aGlzLmlzQmlhcyA9IGlzQmlhcztcbiAgfTtcblxuICBwdWJsaWMgZ2V0TmFtZSgpIHtcbiAgICByZXR1cm4gdGhpcy5uYW1lO1xuICB9XG5cbiAgcHVibGljIGdldElzQmlhcygpIHtcbiAgICByZXR1cm4gdGhpcy5pc0JpYXM7XG4gIH1cblxuICBwdWJsaWMgc2V0QXNJbnB1dE5ldXJvbihhY3RpdmF0aW9uOiBudW1iZXIpIHtcbiAgICB0aGlzLmlzSW5wdXQgPSB0cnVlO1xuICAgIHRoaXMuYWN0aXZhdGlvbiA9IGFjdGl2YXRpb247XG4gICAgdGhpcy5pbnB1dHMgPSBudWxsO1xuICB9XG5cbiAgcHVibGljIHNldElucHV0KGFjdGl2YXRpb246IG51bWJlcikge1xuICAgIGlmICghdGhpcy5pc0lucHV0KSB7XG4gICAgICB0aHJvdyAnQ2Fubm90IHNldCBhY3RpdmF0aW9uIG9mIG5vbi1pbnB1dCBuZXVyb24nO1xuICAgIH1cblxuICAgIHRoaXMuYWN0aXZhdGlvbiA9IGFjdGl2YXRpb247XG4gIH1cblxuICBwdWJsaWMgc2V0U2lnbWEoc2lnbWE6IG51bWJlcikge1xuICAgIHRoaXMuc2lnbWEgPSBzaWdtYTtcbiAgfVxuXG4gIHB1YmxpYyBhZGRJbnB1dChpbnB1dDogQ29ubmVjdGlvbikge1xuICAgIHRoaXMuaW5wdXRzLnB1c2goaW5wdXQpO1xuICB9O1xuXG4gIHB1YmxpYyBnZXRJbnB1dHMoKTogQ29ubmVjdGlvbltdIHtcbiAgICByZXR1cm4gdGhpcy5pbnB1dHM7XG4gIH1cblxuICBwdWJsaWMgYWRkT3V0cHV0KG91dHB1dDogQ29ubmVjdGlvbikge1xuICAgIHRoaXMub3V0cHV0cy5wdXNoKG91dHB1dCk7XG4gIH1cblxuICBwdWJsaWMgZ2V0T3V0cHV0cygpOiBDb25uZWN0aW9uW10ge1xuICAgIHJldHVybiB0aGlzLm91dHB1dHM7XG4gIH1cblxuICBwdWJsaWMgc2V0T3V0cHV0cyhjb25uZWN0aW9uczogQ29ubmVjdGlvbltdKSB7XG4gICAgdGhpcy5vdXRwdXRzID0gY29ubmVjdGlvbnM7XG4gIH1cblxuICBwdWJsaWMgc2V0SW5wdXRzKGNvbm5lY3Rpb25zOiBDb25uZWN0aW9uW10pIHtcbiAgICB0aGlzLmlucHV0cyA9IGNvbm5lY3Rpb25zO1xuICB9XG5cbiAgcHVibGljIHJlc2V0SW5wdXRzKCkge1xuICAgIHRoaXMuaW5wdXRzID0gW107XG4gIH1cblxuICBwdWJsaWMgcmVzZXRPdXRwdXRzKCkge1xuICAgIHRoaXMub3V0cHV0cyA9IFtdO1xuICB9XG5cbiAgcHVibGljIHJlc2V0KCkge1xuICAgIHRoaXMuaXNDYWxjdWxhdGVkID0gZmFsc2U7XG4gIH1cblxuICBwdWJsaWMgZ2V0QWN0aXZhdGlvbigpOiBudW1iZXIge1xuICAgIGlmICh0aGlzLmlzQmlhcykgdGhpcy5hY3RpdmF0aW9uID0gMTtcbiAgICByZXR1cm4gdGhpcy5hY3RpdmF0aW9uO1xuICB9XG5cbiAgcHVibGljIGdldFNpZ21hKCkge1xuICAgIHJldHVybiB0aGlzLnNpZ21hO1xuICB9XG5cbiAgcHVibGljIGNhbGN1bGF0ZUFjdGl2YXRpb24oKTogbnVtYmVyIHtcbiAgICBpZiAoIXRoaXMuaXNJbnB1dCAmJiAhdGhpcy5pc0NhbGN1bGF0ZWQgJiYgIXRoaXMuaXNCaWFzKSB7XG4gICAgICB0aGlzLmFjdGl2YXRpb24gPSBTSUdNT0lELm91dHB1dCh0aGlzLmlucHV0cy5yZWR1Y2UoKGFjYywgY3VyckNvbm4pID0+IGFjYyArIGN1cnJDb25uLmNhbGN1bGF0ZVZhbHVlKCksIDApKTtcbiAgICAgIHRoaXMuaXNDYWxjdWxhdGVkID0gdHJ1ZTtcbiAgICB9XG4gICAgcmV0dXJuIHRoaXMuZ2V0QWN0aXZhdGlvbigpO1xuICB9XG59IiwiaW1wb3J0IHsgTmV1cm9uIH0gZnJvbSBcIi4vTmV1cm9uXCI7XG5cbmV4cG9ydCBjbGFzcyBDb25uZWN0aW9uIHtcbiAgcHJpdmF0ZSB3ZWlnaHQ6IG51bWJlciA9IE1hdGgucmFuZG9tKCkgKiAxMCAtIDU7XG4gIHByaXZhdGUgaW5wdXROZXVyb246IE5ldXJvbjtcbiAgcHJpdmF0ZSBvdXRwdXROZXVyb246IE5ldXJvbjtcbiAgcHJpdmF0ZSBzYW1wbGVXZWlnaHRDaGFuZ2VzOiBudW1iZXJbXSA9IFtdO1xuXG4gIGNvbnN0cnVjdG9yKGlucHV0OiBOZXVyb24sIG91dHB1dDogTmV1cm9uKSB7XG4gICAgdGhpcy5pbnB1dE5ldXJvbiA9IGlucHV0O1xuICAgIHRoaXMub3V0cHV0TmV1cm9uID0gb3V0cHV0O1xuICB9XG5cbiAgcHVibGljIGFkZFNhbXBsZVdlaWdodENoYW5nZSh3ZWlnaHRDaGFuZ2U6IG51bWJlcikge1xuICAgIHRoaXMuc2FtcGxlV2VpZ2h0Q2hhbmdlcy5wdXNoKHdlaWdodENoYW5nZSk7XG4gIH1cblxuICBwdWJsaWMgYXBwbHlBdmVyYWdlV2VpZ2h0Q2hhbmdlKCkge1xuICAgIGNvbnN0IGNoYW5nZSA9ICh0aGlzLnNhbXBsZVdlaWdodENoYW5nZXMucmVkdWNlKChhY2MsIHZhbCkgPT4gYWNjICsgdmFsLCAwKSAvIHRoaXMuc2FtcGxlV2VpZ2h0Q2hhbmdlcy5sZW5ndGgpO1xuICAgIHRoaXMud2VpZ2h0ICs9IGNoYW5nZTtcbiAgICB0aGlzLnNhbXBsZVdlaWdodENoYW5nZXMgPSBbXTtcbiAgfVxuXG4gIHB1YmxpYyBnZXRXZWlnaHQoKSB7XG4gICAgcmV0dXJuIHRoaXMud2VpZ2h0O1xuICB9XG5cbiAgcHVibGljIGNhbGN1bGF0ZVZhbHVlKCkge1xuICAgIHJldHVybiB0aGlzLndlaWdodCAqIHRoaXMuaW5wdXROZXVyb24uY2FsY3VsYXRlQWN0aXZhdGlvbigpO1xuICB9XG5cbiAgcHVibGljIGdldE91dHB1dE5ldXJvbigpIHtcbiAgICByZXR1cm4gdGhpcy5vdXRwdXROZXVyb247XG4gIH1cblxuICBwdWJsaWMgZ2V0SW5wdXROZXVyb24oKSB7XG4gICAgcmV0dXJuIHRoaXMuaW5wdXROZXVyb247XG4gIH1cbn0iLCJpbXBvcnQgeyBWaXN1YWxpemVyLCBEcmF3YWJsZU5ldXJvbiB9IGZyb20gJy4vVmlzdWFsaXplcic7XG5pbXBvcnQgeyBOZXVyYWxDb3JlIH0gZnJvbSAnLi9uZXVyYWxOZXR3b3JrL05ldXJhbENvcmUnO1xuaW1wb3J0IHsgUmVndWxhcml6YXRpb25zLCBUcmFpblNhbXBsZSB9IGZyb20gJy4vbmV1cmFsTmV0d29yay9IZWxwZXJPYmplY3RzJztcbmltcG9ydCB7IE5ldXJvbiB9IGZyb20gJy4vbmV1cmFsTmV0d29yay9OZXVyb24nO1xuXG4od2luZG93IGFzIGFueSkuc2xpZGUgPSAoaTogbnVtYmVyLCB2YWx1ZTogbnVtYmVyKSA9PiB7XG4gIGlucHV0W2ldID0gdmFsdWU7XG4gIG5ldXJhbENvcmUuZXZhbHVhdGUoaW5wdXQpO1xuICB2aXN1YWxpemVyLmRyYXcobmV1cmFsQ29yZS5nZXROZXVyb25zKCksIG5ldXJhbENvcmUuZ2V0Q29ubmVjdGlvbnMoKSk7XG59XG5cbih3aW5kb3cgYXMgYW55KS5hZGRPclJlbW92ZUxheWVyID0gKGFkZDogYm9vbGVhbikgPT4ge1xuICBuZXVyYWxDb3JlLmFkZE9yUmVtb3ZlTGF5ZXIoYWRkKTtcbiAgdXBkYXRlVUkoKTtcbn1cblxuKHdpbmRvdyBhcyBhbnkpLmFkZE9yUmVtb3ZlTmV1cm9uID0gKGFkZDogYm9vbGVhbiwgbGF5ZXJJZHg6IG51bWJlcikgPT4ge1xuICBuZXVyYWxDb3JlLmFkZE9yUmVtb3ZlTmV1cm9uKGFkZCwgbGF5ZXJJZHgpO1xuICBpZiAobGF5ZXJJZHggPT0gMCkge1xuICAgIGlmIChhZGQpXG4gICAgICBpbnB1dC5wdXNoKDEpO1xuICAgIGVsc2VcbiAgICAgIGlucHV0LnBvcCgpO1xuICB9XG5cbiAgdXBkYXRlVUkoKTtcbn1cblxuKHdpbmRvdyBhcyBhbnkpLnRyYWluID0gKG11bHRpcGxlSXRlcnM6IGJvb2xlYW4pID0+IHtcbiAgbGV0IGl0ZXJzID0gbXVsdGlwbGVJdGVycyA/IE51bWJlci5wYXJzZUludChpdGVyc0lucHV0LnZhbHVlKSA6IDE7XG4gIG5ldXJhbENvcmUuc2V0UmF0ZShOdW1iZXIucGFyc2VGbG9hdChyYXRlSW5wdXQudmFsdWUpKTtcblxuICAvLyBSZWd1bGFyaXphdGlvblxuICBzd2l0Y2ggKHJlZ1R5cGVJbnB1dC52YWx1ZSkge1xuICAgIGNhc2UgXCJMMVwiOlxuICAgICAgbmV1cmFsQ29yZS5zZXRSZWd1bGFyaXphdGlvblR5cGUoUmVndWxhcml6YXRpb25zLkwxKTtcbiAgICAgIGJyZWFrO1xuICAgIGNhc2UgXCJMMlwiOlxuICAgICAgbmV1cmFsQ29yZS5zZXRSZWd1bGFyaXphdGlvblR5cGUoUmVndWxhcml6YXRpb25zLkwyKTtcbiAgICAgIGJyZWFrO1xuICAgIGNhc2UgXCJub25lXCI6XG4gICAgICBuZXVyYWxDb3JlLnNldFJlZ3VsYXJpemF0aW9uVHlwZShSZWd1bGFyaXphdGlvbnMuTk9ORSk7XG4gICAgICBicmVhaztcbiAgfVxuXG4gIG5ldXJhbENvcmUuc2V0UmVndWxhcml6YXRpb25SYXRlKE51bWJlci5wYXJzZUZsb2F0KHJlZ1JhdGVJbnB1dC52YWx1ZSkpO1xuXG4gIGlmICh0cmFpblJlcGVhdC5jaGVja2VkICYmIGludGVydmFsID09IG51bGwpIHtcbiAgICB0cmFpbkJ0bi5pbm5lclRleHQgPSBcIlN0b3BcIlxuICAgIGludGVydmFsID0gc2V0SW50ZXJ2YWwoKCkgPT4geyBydW5UcmFpbkxvb3AoaXRlcnMpIH0sIDEwMCk7XG4gIH0gZWxzZSBpZiAoaW50ZXJ2YWwgIT0gbnVsbCkge1xuICAgIGNsZWFySW50ZXJ2YWwoaW50ZXJ2YWwpO1xuICAgIGludGVydmFsID0gbnVsbDtcbiAgICB0cmFpbkJ0bi5pbm5lclRleHQgPSBcIlN0YXJ0XCJcbiAgfSBlbHNlIHtcbiAgICBydW5UcmFpbkxvb3AoaXRlcnMpO1xuICB9XG59XG5cbmNvbnN0IHJ1blRyYWluTG9vcCA9IChpdGVyczogbnVtYmVyKSA9PiB7XG4gIGZvciAobGV0IGkgPSAwOyBpIDwgaXRlcnM7IGkrKykge1xuICAgIG5ldXJhbENvcmUudHJhaW4oKTtcbiAgfVxuICB1cGRhdGVVSSgpO1xufVxuXG4od2luZG93IGFzIGFueSkuc2V0VHJhaW5pbmdEYXRhID0gKCkgPT4ge1xuICB0cnkge1xuICAgIGNvbnN0IGRhdGFBcnIgPSBKU09OLnBhcnNlKHRyYWluaW5nU2V0SW5wdXQudmFsdWUpO1xuICAgIG5ldXJhbENvcmUuc2V0VHJhaW5pbmdTYW1wbGVzKFtdKTtcbiAgICBkYXRhQXJyLmZvckVhY2goKHNhbXBsZSkgPT4ge1xuICAgICAgbmV1cmFsQ29yZS5hZGRUcmFpbmluZ1NldChzYW1wbGVbMF0sIHNhbXBsZVsxXSk7XG4gICAgfSk7XG4gICAgbmV1cmFsQ29yZS5yZXNldCgpO1xuICAgIHVwZGF0ZVVJKCk7XG4gIH0gY2F0Y2ggKGVycikge1xuICAgIGFsZXJ0KGVycik7XG4gIH1cbn1cblxuKHdpbmRvdyBhcyBhbnkpLnJlc2V0ID0gKCkgPT4ge1xuICBuZXVyYWxDb3JlLnJlc2V0KCk7XG4gIHVwZGF0ZVVJKCk7XG59XG5cbih3aW5kb3cgYXMgYW55KS5hcHBseVRyYWluaW5nU2FtcGxlID0gKGlkeDogbnVtYmVyKSA9PiB7XG4gIGlucHV0ID0gbmV1cmFsQ29yZS5nZXRUcmFpbmluZ1NhbXBsZXMoKVtpZHhdLmlucHV0O1xuICB1cGRhdGVVSSgpO1xufVxuXG53aW5kb3cub25sb2FkID0gKCkgPT4ge1xuICBtYWluKCk7XG59O1xuXG5sZXQgbmV1cmFsQ29yZTogTmV1cmFsQ29yZTtcbmxldCB2aXN1YWxpemVyOiBWaXN1YWxpemVyO1xubGV0IGlucHV0OiBudW1iZXJbXTtcbmxldCBpbnRlcnZhbCA9IG51bGw7XG5cbmxldCBpbnB1dFNpemUgPSAyO1xubGV0IGhpZGRlblNpemVzID0gWzNdO1xubGV0IG91dHB1dFNpemUgPSAxO1xuXG5sZXQgbGF5ZXJDb250cm9sczogSFRNTEVsZW1lbnQ7XG5sZXQgaW5wdXRDb250cm9sczogSFRNTEVsZW1lbnQ7XG5sZXQgY2FudmFzOiBIVE1MQ2FudmFzRWxlbWVudDtcblxubGV0IGNvc3Q6IEhUTUxFbGVtZW50O1xubGV0IGl0ZXI6IEhUTUxFbGVtZW50O1xuXG5sZXQgcmF0ZUlucHV0OiBIVE1MSW5wdXRFbGVtZW50O1xubGV0IGl0ZXJzSW5wdXQ6IEhUTUxJbnB1dEVsZW1lbnQ7XG5sZXQgcmVnVHlwZUlucHV0OiBIVE1MSW5wdXRFbGVtZW50O1xubGV0IHJlZ1JhdGVJbnB1dDogSFRNTElucHV0RWxlbWVudDtcbmxldCB0cmFpblJlcGVhdDogSFRNTElucHV0RWxlbWVudDtcbmxldCB0cmFpbkJ0bjogSFRNTElucHV0RWxlbWVudDtcblxubGV0IHRyYWluaW5nU2V0TGFiZWxzT3V0cHV0OiBIVE1MRWxlbWVudDtcbmxldCB0cmFpbmluZ1NldERhdGFPdXRwdXQ6IEhUTUxFbGVtZW50O1xubGV0IHRyYWluaW5nU2V0SW5wdXQ6IEhUTUxJbnB1dEVsZW1lbnQ7XG5cbmNvbnN0IG1haW4gPSAoKSA9PiB7XG4gIGNhbnZhcyA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdjb250ZW50JykgYXMgSFRNTENhbnZhc0VsZW1lbnQ7XG4gIGlucHV0Q29udHJvbHMgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnaW5wdXQtY29udHJvbHMnKTtcbiAgbGF5ZXJDb250cm9scyA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdsYXllci1jb250cm9scycpO1xuICBpdGVyID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2l0ZXItb3V0cHV0Jyk7XG4gIGNvc3QgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnY29zdCcpO1xuICByYXRlSW5wdXQgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgncmF0ZS1pbnB1dCcpIGFzIEhUTUxJbnB1dEVsZW1lbnQ7XG4gIGl0ZXJzSW5wdXQgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnaXRlcnMtaW5wdXQnKSBhcyBIVE1MSW5wdXRFbGVtZW50O1xuICByZWdUeXBlSW5wdXQgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgncmVndWxhcml6YXRpb24tdHlwZS1pbnB1dCcpIGFzIEhUTUxJbnB1dEVsZW1lbnQ7XG4gIHJlZ1JhdGVJbnB1dCA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdyZWd1bGFyaXphdGlvbi1yYXRlLWlucHV0JykgYXMgSFRNTElucHV0RWxlbWVudDtcbiAgdHJhaW5pbmdTZXREYXRhT3V0cHV0ID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ3RyYWluaW5nLXNldC1kYXRhLW91dHB1dCcpIGFzIEhUTUxJbnB1dEVsZW1lbnQ7XG4gIHRyYWluaW5nU2V0TGFiZWxzT3V0cHV0ID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ3RyYWluaW5nLXNldC1uZXVyb25zLW91dHB1dCcpIGFzIEhUTUxJbnB1dEVsZW1lbnQ7XG4gIHRyYWluaW5nU2V0SW5wdXQgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgndHJhaW5pbmctc2V0LWlucHV0JykgYXMgSFRNTElucHV0RWxlbWVudDtcbiAgdHJhaW5SZXBlYXQgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgndHJhaW4tcmVwZWF0LWNoY2tieCcpIGFzIEhUTUxJbnB1dEVsZW1lbnQ7XG4gIHRyYWluQnRuID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ3RyYWluLWJ0bicpIGFzIEhUTUxJbnB1dEVsZW1lbnQ7XG5cbiAgdmlzdWFsaXplciA9IG5ldyBWaXN1YWxpemVyKGNhbnZhcyk7XG5cbiAgaW5pdENvcmUoKTtcbn1cblxuY29uc3QgaW5pdENvcmUgPSAoKSA9PiB7XG4gIG5ldXJhbENvcmUgPSBuZXcgTmV1cmFsQ29yZShpbnB1dFNpemUsIGhpZGRlblNpemVzLCBvdXRwdXRTaXplKTtcblxuICBuZXVyYWxDb3JlLmFkZFRyYWluaW5nU2V0KFsxLCAxXSwgWzBdKTtcbiAgbmV1cmFsQ29yZS5hZGRUcmFpbmluZ1NldChbMSwgMF0sIFsxXSk7XG4gIG5ldXJhbENvcmUuYWRkVHJhaW5pbmdTZXQoWzAsIDFdLCBbMV0pO1xuICBuZXVyYWxDb3JlLmFkZFRyYWluaW5nU2V0KFswLCAwXSwgWzBdKTtcblxuICAvLyBTZXQgZGVmYXVsdCB2YWx1ZXNcbiAgaW5wdXQgPSBuZXcgQXJyYXkobmV1cmFsQ29yZS5nZXRJbnB1dFNpemUoKSk7XG4gIGlucHV0LmZpbGwoMSk7XG5cbiAgbmV1cmFsQ29yZS5ldmFsdWF0ZShpbnB1dCk7XG4gIHVwZGF0ZVVJKCk7XG59XG5cbmNvbnN0IHVwZGF0ZVVJID0gKCkgPT4ge1xuICBuZXVyYWxDb3JlLmV2YWx1YXRlKGlucHV0KTtcbiAgdmlzdWFsaXplci5kcmF3KG5ldXJhbENvcmUuZ2V0TmV1cm9ucygpLCBuZXVyYWxDb3JlLmdldENvbm5lY3Rpb25zKCkpO1xuXG4gIGxldCBjb250ZW50ID0gYWRkTGF5ZXJDb250cm9sUm93KFxuICAgICdMYXllcnMnLFxuICAgIG5ldXJhbENvcmUuZ2V0TGF5ZXJDbnQoKS50b1N0cmluZygpLFxuICAgICdhZGRPclJlbW92ZUxheWVyKHRydWUpJyxcbiAgICAnYWRkT3JSZW1vdmVMYXllcihmYWxzZSknXG4gICk7XG5cblxuICBjb250ZW50ICs9IGFkZExheWVyQ29udHJvbFJvdyhcbiAgICAnSW5wdXQgc2l6ZScsXG4gICAgbmV1cmFsQ29yZS5nZXRJbnB1dFNpemUoKS50b1N0cmluZygpLFxuICAgICdhZGRPclJlbW92ZU5ldXJvbih0cnVlLCAwKScsXG4gICAgJ2FkZE9yUmVtb3ZlTmV1cm9uKGZhbHNlLCAwKSdcbiAgKTtcblxuICBmb3IgKGxldCBpID0gMDsgaSA8IG5ldXJhbENvcmUuZ2V0TGF5ZXJDbnQoKSAtIDI7IGkrKykge1xuICAgIGNvbnRlbnQgKz0gYWRkTGF5ZXJDb250cm9sUm93KFxuICAgICAgJ0hpZGRlbiBsYXllciBzaXplJyxcbiAgICAgIG5ldXJhbENvcmUuZ2V0SGlkZGVuTGF5ZXJTaXplcygpW2ldLnRvU3RyaW5nKCksXG4gICAgICBgYWRkT3JSZW1vdmVOZXVyb24odHJ1ZSwgJHtpICsgMX0pYCxcbiAgICAgIGBhZGRPclJlbW92ZU5ldXJvbihmYWxzZSwgJHtpICsgMX0pYFxuICAgICk7XG4gIH1cblxuICBjb250ZW50ICs9IGFkZExheWVyQ29udHJvbFJvdyhcbiAgICAnT3V0cHV0IHNpemUnLFxuICAgIG5ldXJhbENvcmUuZ2V0T3V0cHV0U2l6ZSgpLnRvU3RyaW5nKCksXG4gICAgYGFkZE9yUmVtb3ZlTmV1cm9uKHRydWUsICR7bmV1cmFsQ29yZS5nZXRMYXllckNudCgpIC0gMX0pYCxcbiAgICBgYWRkT3JSZW1vdmVOZXVyb24oZmFsc2UsICR7bmV1cmFsQ29yZS5nZXRMYXllckNudCgpIC0gMX0pYFxuICApO1xuXG4gIGxheWVyQ29udHJvbHMuaW5uZXJIVE1MID0gY29udGVudDtcblxuICBpbnB1dENvbnRyb2xzLmlubmVySFRNTCA9ICcnO1xuXG4gIGlmICghdmlzdWFsaXplci5nZXREcmF3YWJsZUlucHV0TmV1cm9ucygpKSB7XG4gICAgdmlzdWFsaXplci5kcmF3KG5ldXJhbENvcmUuZ2V0TmV1cm9ucygpLCBuZXVyYWxDb3JlLmdldENvbm5lY3Rpb25zKCkpO1xuICB9XG5cblxuICBjb25zdCBjb250cm9sSGVpZ2h0ID0gNTA7XG4gIHZpc3VhbGl6ZXIuZ2V0RHJhd2FibGVJbnB1dE5ldXJvbnMoKS5mb3JFYWNoKChuZXVyb246IERyYXdhYmxlTmV1cm9uKSA9PiB7XG4gICAgY29uc3QgeCA9IG5ldXJvbi54IC0gNTA7XG4gICAgY29uc3QgeSA9IG5ldXJvbi55IC0gY29udHJvbEhlaWdodCAvIDIgKyA1O1xuICAgIGlucHV0Q29udHJvbHMuaW5uZXJIVE1MICs9IGA8aW5wdXRcbiAgICAgIHN0eWxlPVwicG9zaXRpb246IGFic29sdXRlOyB0b3A6ICR7eX1weDsgbGVmdDogJHt4fXB4OyBoZWlnaHQ6ICR7Y29udHJvbEhlaWdodH1weDtcIiBcbiAgICAgIHR5cGU9XCJyYW5nZVwiIG9yaWVudD1cInZlcnRpY2FsXCIgbWluPVwiMFwiIG1heD1cIjFcIiB2YWx1ZT1cIiR7bmV1cm9uLmFjdGl2YXRpb259XCIgc3RlcD1cIjAuMDVcIiBcbiAgICAgIG9uaW5wdXQ9XCJzbGlkZSgke25ldXJvbi5pZH0sIHRoaXMudmFsdWUpO1wiPmA7XG4gIH0pXG5cbiAgaXRlci5pbm5lckhUTUwgPSBuZXVyYWxDb3JlLmdldEl0ZXJhdGlvbigpLnRvU3RyaW5nKCk7XG4gIGNvc3QuaW5uZXJIVE1MID0gbmV1cmFsQ29yZS5nZXRDb3N0KCkudG9TdHJpbmcoKTtcblxuICAvLyBBZGQgdHJhaW5pbmcgc2V0IGRhdGEgbGFiZWxzXG4gIGxldCBsYWJlbHMgPSAnJztcbiAgZm9yIChsZXQgaSA9IDA7IGkgPCBuZXVyYWxDb3JlLmdldElucHV0U2l6ZSgpOyBpKyspIHtcbiAgICBsYWJlbHMgKz0gYDx0aCBzY29wZT0nY29sJz5JbnB1dCAke2l9PC90aD5gO1xuICB9XG4gIGZvciAobGV0IGkgPSAwOyBpIDwgbmV1cmFsQ29yZS5nZXRPdXRwdXRTaXplKCk7IGkrKykge1xuICAgIGxhYmVscyArPSBgPHRoIHNjb3BlPSdjb2wnIHN0eWxlPVwidGV4dC1hbGlnbjogcmlnaHRcIj5PdXRwdXQgJHtpfTwvdGg+YDtcbiAgfVxuICB0cmFpbmluZ1NldExhYmVsc091dHB1dC5pbm5lckhUTUwgPSBsYWJlbHM7XG5cbiAgLy8gQWRkIHRyYWluaW5nIGRhdGFcbiAgbGV0IHRyYWluaW5nRGF0YSA9ICcnO1xuICBuZXVyYWxDb3JlLmdldFRyYWluaW5nU2FtcGxlcygpLmZvckVhY2goKHNhbXBsZSwgaWR4KSA9PiB7XG4gICAgdHJhaW5pbmdEYXRhICs9IGA8dHIgc3R5bGU9XCJjdXJzb3I6cG9pbnRlcjtcIiBvbmNsaWNrPVwiYXBwbHlUcmFpbmluZ1NhbXBsZSgke2lkeH0pXCI+YDtcbiAgICBzYW1wbGUuaW5wdXQuZm9yRWFjaCh2YWwgPT4ge1xuICAgICAgdHJhaW5pbmdEYXRhICs9IGA8dGQ+JHt2YWx9PC90ZD5gO1xuICAgIH0pO1xuICAgIHNhbXBsZS5vdXRwdXQuZm9yRWFjaCh2YWwgPT4ge1xuICAgICAgdHJhaW5pbmdEYXRhICs9IGA8dGQgc3R5bGU9XCJ0ZXh0LWFsaWduOiByaWdodFwiPiR7dmFsfTwvdGQ+YDtcbiAgICB9KTtcbiAgICB0cmFpbmluZ0RhdGEgKz0gJzwvdHI+JztcbiAgfSk7XG4gIHRyYWluaW5nU2V0RGF0YU91dHB1dC5pbm5lckhUTUwgPSB0cmFpbmluZ0RhdGE7XG59XG5cbmNvbnN0IGFkZExheWVyQ29udHJvbFJvdyA9IChsYWJlbDogc3RyaW5nLCBzaXplOiBzdHJpbmcsIG9uY2xpY2tQb3M6IHN0cmluZywgb25jbGlja05lZzogc3RyaW5nKTogc3RyaW5nID0+IHtcbiAgcmV0dXJuIGA8dHI+PHRkIGFsaWduPSdyaWdodCc+PGxhYmVsPiR7bGFiZWx9OjwvbGFiZWw+PGIgc3R5bGU9XCJtYXJnaW46IGF1dG8gNnB4XCI+JHtzaXplfTwvYj48L3RkPjx0ZD5cbiAgPGRpdiBjbGFzcz1cImJ0bi1ncm91cFwiIHJvbGU9XCJncm91cFwiPlxuICAgIDxidXR0b24gdHlwZT1cImJ1dHRvblwiIGNsYXNzPVwiYnRuIGJ0bi1zZWNvbmRhcnkgYnRuLXNtXCIgb25jbGljaz1cIiR7b25jbGlja05lZ31cIj4tPC9idXR0b24+XG4gICAgPGJ1dHRvbiB0eXBlPVwiYnV0dG9uXCIgY2xhc3M9XCJidG4gYnRuLXNlY29uZGFyeSBidG4tc21cIiBvbmNsaWNrPVwiJHtvbmNsaWNrUG9zfVwiPis8L2J1dHRvbj5cbiAgPC9kaXY+PC90ZD48L3RyPmA7XG59IiwiaW1wb3J0IHsgTmV1cm9uIH0gZnJvbSBcIi4vTmV1cm9uXCI7XG5pbXBvcnQgeyBDb25uZWN0aW9uIH0gZnJvbSBcIi4vQ29ubmVjdGlvblwiO1xuaW1wb3J0IHsgVHJhaW5TYW1wbGUsIFNJR01PSUQsIFJlZ3VsYXJpemF0aW9ucywgTDJSZWcsIGdldE51bWJlck9mQ29ubmVjdGlvbnMsIEwxUmVnIH0gZnJvbSBcIi4vSGVscGVyT2JqZWN0c1wiO1xuXG5leHBvcnQgY2xhc3MgTmV1cmFsQ29yZSB7XG4gIHByaXZhdGUgaW5wdXRTaXplOiBudW1iZXI7XG4gIHByaXZhdGUgaGlkZGVuTGF5ZXJTaXplczogbnVtYmVyW107XG4gIHByaXZhdGUgb3V0cHV0U2l6ZTogbnVtYmVyO1xuXG4gIHByaXZhdGUgbGF5ZXJDbnQ6IG51bWJlcjtcblxuICBwcml2YXRlIGl0ZXJDbnQgPSAwO1xuXG4gIHByaXZhdGUgcmF0ZSA9IDE7XG4gIHByaXZhdGUgbGFtYmRhID0gMC4wMDE7XG4gIHByaXZhdGUgcmVnVHlwZTogUmVndWxhcml6YXRpb25zID0gUmVndWxhcml6YXRpb25zLk5PTkU7XG5cbiAgcHJpdmF0ZSBiaWFzTmV1cm9uID0gbmV3IE5ldXJvbignYmlhcycsIHRydWUpO1xuICBwcml2YXRlIG5ldXJvbnM6IE5ldXJvbltdW10gPSBbXTtcbiAgcHJpdmF0ZSBjb25uZWN0aW9uczogQ29ubmVjdGlvbltdW10gPSBbXTtcblxuICBwcml2YXRlIHRyYWluU2FtcGxlczogVHJhaW5TYW1wbGVbXSA9IFtdO1xuXG4gIGNvbnN0cnVjdG9yKGlucHV0U2l6ZTogbnVtYmVyLCBoaWRkZW5MYXllclNpemVzOiBudW1iZXJbXSwgb3V0cHV0U2l6ZTogbnVtYmVyKSB7XG4gICAgdGhpcy5pbnB1dFNpemUgPSBpbnB1dFNpemU7XG4gICAgdGhpcy5oaWRkZW5MYXllclNpemVzID0gaGlkZGVuTGF5ZXJTaXplcztcbiAgICB0aGlzLm91dHB1dFNpemUgPSBvdXRwdXRTaXplO1xuICAgIHRoaXMubGF5ZXJDbnQgPSBoaWRkZW5MYXllclNpemVzLmxlbmd0aCArIDI7XG5cbiAgICAvLyBSZXNldFxuICAgIHRoaXMubmV1cm9ucyA9IFtdO1xuICAgIHRoaXMuY29ubmVjdGlvbnMgPSBbXTtcblxuICAgIHRoaXMuaW5pdCgpO1xuICB9XG5cbiAgcHJpdmF0ZSBpbml0KCkge1xuICAgIC8vIENyZWF0ZSB0aGUgbmV1cm9uc1xuICAgIGZvciAobGV0IGwgPSAwOyBsIDwgdGhpcy5sYXllckNudDsgbCsrKSB7XG4gICAgICAvLyBIb3cgbWFueSBuZXVyb25zIGFyZSBpbiBlYWNoIGxheWVyP1xuICAgICAgbGV0IG5ldXJvbnNJbkxheWVyQ250ID0gMDtcbiAgICAgIHN3aXRjaCAobCkge1xuICAgICAgICBjYXNlIDA6XG4gICAgICAgICAgbmV1cm9uc0luTGF5ZXJDbnQgPSB0aGlzLmlucHV0U2l6ZTtcbiAgICAgICAgICBicmVhaztcbiAgICAgICAgY2FzZSB0aGlzLmhpZGRlbkxheWVyU2l6ZXMubGVuZ3RoICsgMTpcbiAgICAgICAgICBuZXVyb25zSW5MYXllckNudCA9IHRoaXMub3V0cHV0U2l6ZTtcbiAgICAgICAgICBicmVhaztcbiAgICAgICAgZGVmYXVsdDpcbiAgICAgICAgICBuZXVyb25zSW5MYXllckNudCA9IHRoaXMuaGlkZGVuTGF5ZXJTaXplc1tsIC0gMV07XG4gICAgICAgICAgYnJlYWs7XG4gICAgICB9XG5cbiAgICAgIHRoaXMubmV1cm9uc1tsXSA9IFtdO1xuXG4gICAgICAvLyBDcmVhdGUgdGhlbVxuICAgICAgZm9yIChsZXQgbiA9IDA7IG4gPCBuZXVyb25zSW5MYXllckNudDsgbisrKSB7XG4gICAgICAgIHRoaXMubmV1cm9uc1tsXVtuXSA9IG5ldyBOZXVyb24oYE5ldXJvbiR7bH0ke259YCk7XG4gICAgICAgIGlmIChsID09IDApIHtcbiAgICAgICAgICB0aGlzLm5ldXJvbnNbbF1bbl0uc2V0QXNJbnB1dE5ldXJvbigwKTsgLy8ganVzdCB0byBhdm9pZCBjcmFzaGVzLCB0aGUgMCBzaG91bGQgYmUgb3ZlcnJpZGVuIGxhdGVyIFxuICAgICAgICB9XG4gICAgICB9XG4gICAgfVxuXG4gICAgLy8gQ3JlYXRlIHRoZSBDb25uZWN0aW9uc1xuICAgIHRoaXMuY3JlYXRlQ29ubmVjdGlvbnMoMCwgdGhpcy5sYXllckNudCAtIDEpO1xuICB9XG5cbiAgcHVibGljIGV2YWx1YXRlKGlucHV0OiBudW1iZXJbXSk6IG51bWJlcltdIHtcblxuICAgIGlmIChpbnB1dC5sZW5ndGggIT0gdGhpcy5pbnB1dFNpemUpIHtcbiAgICAgIHRocm93ICdJbnB1dCBzaXplIGRvZXMgbm90IG1hdGNoJztcbiAgICB9XG4gICAgLy8gUmVzZXQsIHNvIGVhY2ggbmV1cm9uIGlzIHJlY2FsY3VsYXRlZFxuICAgIHRoaXMubmV1cm9ucy5mb3JFYWNoKGxheWVyID0+IHsgbGF5ZXIuZm9yRWFjaChuZXVyb24gPT4gbmV1cm9uLnJlc2V0KCkpIH0pXG4gICAgLy8gU2V0IGlucHV0IGxheWVyXG4gICAgdGhpcy5uZXVyb25zWzBdLmZvckVhY2goKG5ldXJvbiwgaWR4KSA9PiB7IG5ldXJvbi5zZXRJbnB1dChpbnB1dFtpZHhdKSB9KTtcblxuICAgIHRoaXMubmV1cm9uc1t0aGlzLmxheWVyQ250IC0gMV0uZm9yRWFjaChuZXVyb24gPT4ge1xuICAgICAgbmV1cm9uLmNhbGN1bGF0ZUFjdGl2YXRpb24oKTtcbiAgICB9KTtcblxuICAgIHJldHVybiB0aGlzLm5ldXJvbnNbdGhpcy5sYXllckNudCAtIDFdLm1hcChuZXVyb24gPT4gbmV1cm9uLmdldEFjdGl2YXRpb24oKSk7XG4gIH1cblxuICBwdWJsaWMgYWRkVHJhaW5pbmdTZXQoaW5wdXQ6IG51bWJlcltdLCBvdXRwdXQ6IG51bWJlcltdKSB7XG4gICAgaWYgKGlucHV0Lmxlbmd0aCAhPSB0aGlzLmlucHV0U2l6ZSkge1xuICAgICAgdGhyb3cgJ0lucHV0IHNpemUgZG9lcyBub3QgbWF0Y2gnO1xuICAgIH0gZWxzZSBpZiAob3V0cHV0Lmxlbmd0aCAhPSB0aGlzLm91dHB1dFNpemUpIHtcbiAgICAgIHRocm93ICdPdXRwdXQgc2l6ZSBkb2VzIG5vdCBtYXRjaCc7XG4gICAgfVxuXG4gICAgdGhpcy50cmFpblNhbXBsZXMucHVzaChuZXcgVHJhaW5TYW1wbGUoaW5wdXQsIG91dHB1dCkpXG4gIH1cblxuICBwdWJsaWMgZ2V0Q29zdCgpOiBudW1iZXIge1xuICAgIGlmICh0aGlzLnRyYWluU2FtcGxlcy5sZW5ndGggPT0gMCkge1xuICAgICAgcmV0dXJuIDA7XG4gICAgfVxuXG4gICAgY29uc3QgY29zdFN1bSA9IHRoaXMudHJhaW5TYW1wbGVzLnJlZHVjZSgoY29zdFN1bSwgc2FtcGxlKSA9PiB7IC8vIEFkZCB1cCBhbGwgc2FtcGxlc1xuICAgICAgdGhpcy5ldmFsdWF0ZShzYW1wbGUuaW5wdXQpO1xuICAgICAgcmV0dXJuIGNvc3RTdW0gKyB0aGlzLm5ldXJvbnNbdGhpcy5sYXllckNudCAtIDFdLnJlZHVjZSgoYWNjLCBuZXVyb24sIGkpID0+IHsgLy8gQWRkIHVwIGFsbCBvdXRwdXQgbmV1cm9uc1xuICAgICAgICByZXR1cm4gYWNjICsgKG5ldXJvbi5nZXRBY3RpdmF0aW9uKCkgLSBzYW1wbGUub3V0cHV0W2ldKSAqKiAyO1xuICAgICAgfSwgMCk7XG4gICAgfSwgMCk7XG5cbiAgICAvLyBSZWd1bGFyaXphdGlvblxuICAgIGxldCByZWdDb3N0ID0gMDtcbiAgICBzd2l0Y2ggKHRoaXMucmVnVHlwZSkge1xuICAgICAgY2FzZSBSZWd1bGFyaXphdGlvbnMuTDE6XG4gICAgICAgIHJlZ0Nvc3QgPSBMMVJlZy5jb3N0KHRoaXMuY29ubmVjdGlvbnMpO1xuICAgICAgICBicmVhaztcbiAgICAgIGNhc2UgUmVndWxhcml6YXRpb25zLkwyOlxuICAgICAgICByZWdDb3N0ID0gTDJSZWcuY29zdCh0aGlzLmNvbm5lY3Rpb25zKTtcbiAgICAgICAgYnJlYWs7XG4gICAgICBjYXNlIFJlZ3VsYXJpemF0aW9ucy5OT05FOlxuICAgICAgICByZWdDb3N0ID0gMDtcbiAgICAgICAgYnJlYWs7XG4gICAgfVxuXG4gICAgcmV0dXJuIDEgLyAyICogY29zdFN1bSAqICgxIC8gdGhpcy50cmFpblNhbXBsZXMubGVuZ3RoKSArXG4gICAgICB0aGlzLmxhbWJkYSAqIHJlZ0Nvc3Q7XG4gIH1cblxuICBwdWJsaWMgdHJhaW4oKSB7XG4gICAgdGhpcy50cmFpblNhbXBsZXMuZm9yRWFjaCgoc2FtcGxlKSA9PiB7XG4gICAgICB0aGlzLmV2YWx1YXRlKHNhbXBsZS5pbnB1dClcblxuICAgICAgLy8gQ2FsY3VsYXRlIHNpZ21hcyBvZiB0aGUgbGFzdCBsYXllclxuICAgICAgdGhpcy5uZXVyb25zW3RoaXMubGF5ZXJDbnQgLSAxXS5mb3JFYWNoKChuZXVyb24sIGlkeCkgPT4ge1xuICAgICAgICBjb25zdCBuZXdTaWdtYSA9XG4gICAgICAgICAgKHNhbXBsZS5vdXRwdXRbaWR4XSAtIG5ldXJvbi5nZXRBY3RpdmF0aW9uKCkpICogU0lHTU9JRC5kZXIobmV1cm9uLmdldEFjdGl2YXRpb24oKSk7XG5cbiAgICAgICAgbmV1cm9uLnNldFNpZ21hKG5ld1NpZ21hKTtcbiAgICAgIH0pO1xuXG4gICAgICAvLyBDYWxjdWxhdGUgc2lnbWFzIGZvciBlYWNoIG5ldXJvbiBpbiB0aGUgbG93ZXIgbGF5ZXJzXG4gICAgICBmb3IgKGxldCBsID0gdGhpcy5sYXllckNudCAtIDI7IGwgPj0gMDsgbC0tKSB7XG4gICAgICAgIHRoaXMubmV1cm9uc1tsXS5mb3JFYWNoKChuZXVyb24pID0+IHtcbiAgICAgICAgICBjb25zdCBuZXdTaWdtYSA9XG4gICAgICAgICAgICBuZXVyb24uZ2V0T3V0cHV0cygpLnJlZHVjZSgoYWNjLCBjb25uZWN0aW9uKSA9PiB7XG4gICAgICAgICAgICAgIHJldHVybiBhY2MgKyBjb25uZWN0aW9uLmdldE91dHB1dE5ldXJvbigpLmdldFNpZ21hKCkgKiBjb25uZWN0aW9uLmdldFdlaWdodCgpO1xuICAgICAgICAgICAgfSwgMCkgKiBTSUdNT0lELmRlcihuZXVyb24uZ2V0QWN0aXZhdGlvbigpKTtcbiAgICAgICAgICBuZXVyb24uc2V0U2lnbWEobmV3U2lnbWEpO1xuICAgICAgICB9KTtcbiAgICAgIH1cblxuICAgICAgLy8gQWNjdW11bGF0ZSBhbGwgd2VpZ2h0IHVwZGF0ZXNcbiAgICAgIHRoaXMuY29ubmVjdGlvbnMuZm9yRWFjaCgoY29ubkxheWVyKSA9PiB7XG4gICAgICAgIGNvbm5MYXllci5mb3JFYWNoKChjb25uZWN0aW9uKSA9PiB7XG5cbiAgICAgICAgICBsZXQgcmVnRGVyID0gMDtcbiAgICAgICAgICBzd2l0Y2ggKHRoaXMucmVnVHlwZSkge1xuICAgICAgICAgICAgY2FzZSBSZWd1bGFyaXphdGlvbnMuTDE6XG4gICAgICAgICAgICAgIHJlZ0RlciA9IEwxUmVnLmRlcihjb25uZWN0aW9uLmdldFdlaWdodCgpLCBnZXROdW1iZXJPZkNvbm5lY3Rpb25zKHRoaXMuY29ubmVjdGlvbnMpKTtcbiAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICBjYXNlIFJlZ3VsYXJpemF0aW9ucy5MMjpcbiAgICAgICAgICAgICAgcmVnRGVyID0gTDJSZWcuZGVyKGNvbm5lY3Rpb24uZ2V0V2VpZ2h0KCksIGdldE51bWJlck9mQ29ubmVjdGlvbnModGhpcy5jb25uZWN0aW9ucykpO1xuICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgIGNhc2UgUmVndWxhcml6YXRpb25zLk5PTkU6XG4gICAgICAgICAgICAgIHJlZ0RlciA9IDA7XG4gICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgIH1cblxuICAgICAgICAgIGNvbnN0IHdlaWdodENoYW5nZSA9XG4gICAgICAgICAgICBjb25uZWN0aW9uLmdldE91dHB1dE5ldXJvbigpLmdldFNpZ21hKCkgKlxuICAgICAgICAgICAgY29ubmVjdGlvbi5nZXRJbnB1dE5ldXJvbigpLmdldEFjdGl2YXRpb24oKSAqXG4gICAgICAgICAgICB0aGlzLnJhdGUgLVxuICAgICAgICAgICAgdGhpcy5sYW1iZGEgKiByZWdEZXI7IC8vIFJlZ3VsYXJpemF0aW9uXG5cbiAgICAgICAgICBjb25uZWN0aW9uLmFkZFNhbXBsZVdlaWdodENoYW5nZSh3ZWlnaHRDaGFuZ2UpO1xuICAgICAgICB9KTtcbiAgICAgIH0pO1xuICAgIH0pO1xuXG4gICAgLy8gVWZmLCBsZXQncyBob3BlIGV2ZXJ5dGhpbmcgd29ya3MgYW5kIGFwcGx5IHRoZSBtYWdpY1xuICAgIHRoaXMuY29ubmVjdGlvbnMuZm9yRWFjaCgoY29ubkxheWVyKSA9PiB7XG4gICAgICBjb25uTGF5ZXIuZm9yRWFjaCgoY29ubmVjdGlvbikgPT4ge1xuICAgICAgICBjb25uZWN0aW9uLmFwcGx5QXZlcmFnZVdlaWdodENoYW5nZSgpO1xuICAgICAgfSk7XG4gICAgfSk7XG5cbiAgICB0aGlzLml0ZXJDbnQrKztcbiAgfVxuXG4gIHB1YmxpYyBhZGRPclJlbW92ZUxheWVyKGFkZDogYm9vbGVhbikge1xuICAgIGlmIChhZGQpIHtcbiAgICAgIGNvbnN0IG5ld0xheWVyU2l6ZSA9IDM7XG4gICAgICB0aGlzLmhpZGRlbkxheWVyU2l6ZXMucHVzaChuZXdMYXllclNpemUpO1xuICAgICAgdGhpcy5sYXllckNudCsrO1xuXG4gICAgICAvLyBDcmVhdGUgdGhlIG5ldyBuZXVyb25zXG4gICAgICB0aGlzLmNyZWF0ZUxheWVyT2ZOZXVyb25zKHRoaXMubGF5ZXJDbnQgLSAyLCBuZXdMYXllclNpemUpO1xuXG4gICAgICAvLyBSZWNyZWF0ZSB0aGUgbGFzdCBsYXllclxuICAgICAgdGhpcy5jcmVhdGVMYXllck9mTmV1cm9ucyh0aGlzLmxheWVyQ250IC0gMSwgdGhpcy5vdXRwdXRTaXplKTtcblxuICAgICAgLy8gUmVjcmVhdGUgYWxsIG5lY2Vzc2FyeSBjb25uZWN0aW9uc1xuICAgICAgdGhpcy5jcmVhdGVDb25uZWN0aW9ucyh0aGlzLmxheWVyQ250IC0gMywgdGhpcy5sYXllckNudCAtIDEpO1xuICAgIH0gZWxzZSB7XG4gICAgICBpZiAodGhpcy5sYXllckNudCA9PSAyKSB7XG4gICAgICAgIHJldHVybjtcbiAgICAgIH1cblxuICAgICAgdGhpcy5oaWRkZW5MYXllclNpemVzLnBvcCgpO1xuICAgICAgdGhpcy5sYXllckNudC0tO1xuICAgICAgdGhpcy5uZXVyb25zLnBvcCgpO1xuICAgICAgdGhpcy5jb25uZWN0aW9ucy5wb3AoKTtcblxuICAgICAgLy8gUmVjcmVhdGUgdGhlIGxhc3QgbGF5ZXJcbiAgICAgIHRoaXMuY3JlYXRlTGF5ZXJPZk5ldXJvbnModGhpcy5sYXllckNudCAtIDEsIHRoaXMub3V0cHV0U2l6ZSk7XG5cbiAgICAgIC8vIFJlY3JlYXRlIGFsbCBuZWNlc3NhcnkgY29ubmVjdGlvbnNcbiAgICAgIHRoaXMuY3JlYXRlQ29ubmVjdGlvbnModGhpcy5sYXllckNudCAtIDIsIHRoaXMubGF5ZXJDbnQgLSAxKTtcbiAgICB9XG4gIH1cblxuICAvLyBUaGlzIGZ1bmN0aW9uIGlzIHZlcnkgbG9uZyBhbmQgdWdseSwgSSBkb250IHdhbnQgdG8gc2ltcGx5IHJlYnVpbGQgdGhlIG5ldHdvcmsgYmVjYXVzZSBJIHdhbnQgdG8ga2VlcCB0aGUgd2VpZ2h0c1xuICBwdWJsaWMgYWRkT3JSZW1vdmVOZXVyb24oYWRkOiBib29sZWFuLCBsYXllcklkeDogbnVtYmVyKSB7XG4gICAgY29uc3QgaXNJbnB1dCA9IGxheWVySWR4ID09IDA7XG4gICAgY29uc3QgaXNPdXRwdXQgPSBsYXllcklkeCA9PSB0aGlzLmxheWVyQ250IC0gMTtcbiAgICBjb25zdCBpc0hpZGRlbiA9ICFpc0lucHV0ICYmICFpc091dHB1dDtcblxuICAgIGNvbnN0IHNpemVDaGFuZ2UgPSAoYWRkKSA/IDEgOiAtMVxuXG4gICAgaWYgKGlzSGlkZGVuKSB7XG4gICAgICB0aGlzLmhpZGRlbkxheWVyU2l6ZXNbbGF5ZXJJZHggLSAxXSArPSBzaXplQ2hhbmdlO1xuICAgIH1cbiAgICBlbHNlIGlmIChpc0lucHV0KSB7XG4gICAgICB0aGlzLmlucHV0U2l6ZSArPSBzaXplQ2hhbmdlO1xuICAgICAgdGhpcy50cmFpblNhbXBsZXMgPSBbXTtcbiAgICB9IGVsc2Uge1xuICAgICAgdGhpcy5vdXRwdXRTaXplICs9IHNpemVDaGFuZ2U7XG4gICAgICB0aGlzLnRyYWluU2FtcGxlcyA9IFtdO1xuICAgIH1cblxuICAgIGlmIChhZGQpIHtcbiAgICAgIGxldCBuZXdOZXVyb25JZHg7XG5cbiAgICAgIGlmIChpc0hpZGRlbikge1xuICAgICAgICBuZXdOZXVyb25JZHggPSB0aGlzLmhpZGRlbkxheWVyU2l6ZXNbbGF5ZXJJZHggLSAxXSAtIDE7XG4gICAgICB9XG4gICAgICBlbHNlIGlmIChpc0lucHV0KSB7XG4gICAgICAgIG5ld05ldXJvbklkeCA9IHRoaXMuaW5wdXRTaXplIC0gMTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIG5ld05ldXJvbklkeCA9IHRoaXMub3V0cHV0U2l6ZSAtIDE7XG4gICAgICB9XG5cbiAgICAgIGNvbnN0IG5ld05ldXJvbiA9IG5ldyBOZXVyb24oYE5ldXJvbiR7bGF5ZXJJZHh9JHtuZXdOZXVyb25JZHh9YCk7XG4gICAgICB0aGlzLm5ldXJvbnNbbGF5ZXJJZHhdW25ld05ldXJvbklkeF0gPSBuZXdOZXVyb247XG5cbiAgICAgIGlmIChpc0lucHV0KVxuICAgICAgICBuZXdOZXVyb24uc2V0QXNJbnB1dE5ldXJvbigwKTtcblxuICAgICAgLy8vLyBBZGQgY29ubmVjdGlvbnMgZnJvbSB0aGUgcHJldiBsYXllclxuICAgICAgaWYgKCFpc0lucHV0KSB7XG4gICAgICAgIHRoaXMubmV1cm9uc1tsYXllcklkeCAtIDFdLmZvckVhY2goKG5ldXJvbikgPT4ge1xuICAgICAgICAgIGNvbnN0IGNvbm5lY3Rpb24gPSBuZXcgQ29ubmVjdGlvbihuZXVyb24sIG5ld05ldXJvbik7XG4gICAgICAgICAgbmV1cm9uLmFkZE91dHB1dChjb25uZWN0aW9uKTtcbiAgICAgICAgICBuZXdOZXVyb24uYWRkSW5wdXQoY29ubmVjdGlvbik7XG4gICAgICAgICAgdGhpcy5jb25uZWN0aW9uc1tsYXllcklkeCAtIDFdLnB1c2goY29ubmVjdGlvbik7XG4gICAgICAgIH0pO1xuICAgICAgICAvLyBEb250IGZvcmdldCB0aGUgYmlhc1xuICAgICAgICBjb25zdCBjb25uZWN0aW9uID0gbmV3IENvbm5lY3Rpb24odGhpcy5iaWFzTmV1cm9uLCBuZXdOZXVyb24pO1xuICAgICAgICBuZXdOZXVyb24uYWRkSW5wdXQoY29ubmVjdGlvbik7XG4gICAgICAgIHRoaXMuY29ubmVjdGlvbnNbbGF5ZXJJZHggLSAxXS5wdXNoKGNvbm5lY3Rpb24pO1xuICAgICAgfVxuXG4gICAgICBpZiAoIWlzT3V0cHV0KSB7XG4gICAgICAgIC8vLy8gQWRkIGNvbm5lY3Rpb25zIHRvIHRoZSBuZXh0IGxheWVyXG4gICAgICAgIHRoaXMubmV1cm9uc1tsYXllcklkeCArIDFdLmZvckVhY2goKG5ldXJvbikgPT4ge1xuICAgICAgICAgIGNvbnN0IGNvbm5lY3Rpb24gPSBuZXcgQ29ubmVjdGlvbihuZXdOZXVyb24sIG5ldXJvbik7XG4gICAgICAgICAgbmV1cm9uLmFkZElucHV0KGNvbm5lY3Rpb24pO1xuICAgICAgICAgIHRoaXMuY29ubmVjdGlvbnNbbGF5ZXJJZHhdLnB1c2goY29ubmVjdGlvbik7XG4gICAgICAgIH0pO1xuICAgICAgfVxuICAgIH0gZWxzZSB7XG4gICAgICBjb25zdCByZW1vdmVkTmV1cm9uID0gdGhpcy5uZXVyb25zW2xheWVySWR4XS5wb3AoKTtcbiAgICAgIC8vIFJlbW92ZSBvdXRwdXRzIGZyb20gdGhlIHByZXYgbGF5ZXJcbiAgICAgIGlmICghaXNJbnB1dCkge1xuICAgICAgICB0aGlzLm5ldXJvbnNbbGF5ZXJJZHggLSAxXS5mb3JFYWNoKChuZXVyb24pID0+IHtcbiAgICAgICAgICBuZXVyb24uc2V0T3V0cHV0cyhuZXVyb24uZ2V0T3V0cHV0cygpLmZpbHRlcigoY29ubmVjdGlvbikgPT4ge1xuICAgICAgICAgICAgcmV0dXJuIGNvbm5lY3Rpb24uZ2V0T3V0cHV0TmV1cm9uKCkuZ2V0TmFtZSgpICE9IHJlbW92ZWROZXVyb24uZ2V0TmFtZSgpO1xuICAgICAgICAgIH0pKTtcbiAgICAgICAgfSk7XG4gICAgICB9XG5cbiAgICAgIC8vIFJlbW92ZSBpbnB1dCBpbiB0aGUgbmV4dCBsYXllclxuICAgICAgaWYgKCFpc091dHB1dCkge1xuICAgICAgICB0aGlzLm5ldXJvbnNbbGF5ZXJJZHggKyAxXS5mb3JFYWNoKChuZXVyb24pID0+IHtcbiAgICAgICAgICBuZXVyb24uc2V0SW5wdXRzKG5ldXJvbi5nZXRJbnB1dHMoKS5maWx0ZXIoKGNvbm5lY3Rpb24pID0+IHtcbiAgICAgICAgICAgIHJldHVybiBjb25uZWN0aW9uLmdldElucHV0TmV1cm9uKCkuZ2V0TmFtZSgpICE9IHJlbW92ZWROZXVyb24uZ2V0TmFtZSgpO1xuICAgICAgICAgIH0pKTtcbiAgICAgICAgfSk7XG4gICAgICB9XG5cbiAgICAgIC8vIFJlbW92ZSB0aGUgdW51c2VkIGNvbm5lY3Rpb25zXG4gICAgICBpZiAoIWlzSW5wdXQpIHtcbiAgICAgICAgdGhpcy5jb25uZWN0aW9uc1tsYXllcklkeCAtIDFdID0gdGhpcy5jb25uZWN0aW9uc1tsYXllcklkeCAtIDFdLmZpbHRlcigoY29ubmVjdGlvbjogQ29ubmVjdGlvbikgPT4ge1xuICAgICAgICAgIHJldHVybiBjb25uZWN0aW9uLmdldE91dHB1dE5ldXJvbigpLmdldE5hbWUoKSAhPSByZW1vdmVkTmV1cm9uLmdldE5hbWUoKTtcbiAgICAgICAgfSk7XG4gICAgICB9XG5cbiAgICAgIGlmICghaXNPdXRwdXQpIHtcbiAgICAgICAgdGhpcy5jb25uZWN0aW9uc1tsYXllcklkeF0gPSB0aGlzLmNvbm5lY3Rpb25zW2xheWVySWR4XS5maWx0ZXIoKGNvbm5lY3Rpb246IENvbm5lY3Rpb24pID0+IHtcbiAgICAgICAgICByZXR1cm4gY29ubmVjdGlvbi5nZXRJbnB1dE5ldXJvbigpLmdldE5hbWUoKSAhPSByZW1vdmVkTmV1cm9uLmdldE5hbWUoKTtcbiAgICAgICAgfSk7XG4gICAgICB9XG4gICAgfVxuICB9XG5cbiAgcHVibGljIHJlc2V0KCkge1xuICAgIHRoaXMuaXRlckNudCA9IDA7XG4gICAgdGhpcy5jcmVhdGVDb25uZWN0aW9ucygwLCB0aGlzLmxheWVyQ250IC0gMSk7XG4gIH1cblxuICBwcml2YXRlIGNyZWF0ZUxheWVyT2ZOZXVyb25zKGxheWVySWR4OiBudW1iZXIsIGxheWVyU2l6ZTogbnVtYmVyKSB7XG4gICAgdGhpcy5uZXVyb25zW2xheWVySWR4XSA9IFtdO1xuICAgIGZvciAobGV0IGkgPSAwOyBpIDwgbGF5ZXJTaXplOyBpKyspIHtcbiAgICAgIHRoaXMubmV1cm9uc1tsYXllcklkeF1baV0gPSBuZXcgTmV1cm9uKGBOZXVyb24ke2xheWVySWR4fSR7aX1gKTtcbiAgICB9XG4gIH1cblxuICBwcml2YXRlIGNyZWF0ZUNvbm5lY3Rpb25zKGZpcnN0TGF5ZXIsIGxhc3RMYXllcikge1xuICAgIGZvciAobGV0IGwgPSBmaXJzdExheWVyOyBsIDwgbGFzdExheWVyOyBsKyspIHtcbiAgICAgIC8vIEZvciBlYWNoIG5ldXJvbiBpbiB0aGUgbGF5ZXIgYWRkIGFsbCBjb25uZWN0aW9ucyB0byBuZXVyb25zIGluIHRoZSBuZXh0IGxheWVyXG4gICAgICB0aGlzLmNvbm5lY3Rpb25zW2xdID0gW107XG5cbiAgICAgIC8vIFJlc2V0IGlucHV0ICYgb3V0cHV0c1xuICAgICAgdGhpcy5uZXVyb25zW2wgKyAxXS5mb3JFYWNoKG5leHROZXVyb24gPT4geyBuZXh0TmV1cm9uLnJlc2V0SW5wdXRzKCkgfSk7XG4gICAgICB0aGlzLm5ldXJvbnNbbF0uZm9yRWFjaChuZXh0TmV1cm9uID0+IHsgbmV4dE5ldXJvbi5yZXNldE91dHB1dHMoKSB9KTtcblxuXG4gICAgICB0aGlzLm5ldXJvbnNbbCArIDFdLmZvckVhY2gobmV4dE5ldXJvbiA9PiB7IC8vIElmIHlvdSB3b25kZXIgd2h5IHRoaXMgY3ljbGVzIGFyZSBzd2l0Y2hlZCwgaXQncyBiZWNhdXNlIG9mIHRoZSBiaWFzXG4gICAgICAgIHRoaXMubmV1cm9uc1tsXS5mb3JFYWNoKGN1cnJOZXVyb24gPT4ge1xuICAgICAgICAgIGNvbnN0IGNvbm5lY3Rpb24gPSBuZXcgQ29ubmVjdGlvbihjdXJyTmV1cm9uLCBuZXh0TmV1cm9uKVxuICAgICAgICAgIGN1cnJOZXVyb24uYWRkT3V0cHV0KGNvbm5lY3Rpb24pO1xuICAgICAgICAgIG5leHROZXVyb24uYWRkSW5wdXQoY29ubmVjdGlvbik7XG4gICAgICAgICAgdGhpcy5jb25uZWN0aW9uc1tsXS5wdXNoKGNvbm5lY3Rpb24pO1xuICAgICAgICB9KTtcblxuICAgICAgICAvLyBBZGQgYmlhcyBuZXVyb24gdG8gZWFjaCBsYXllclxuICAgICAgICBjb25zdCBiaWFzQ29ubmVjdGlvbiA9IG5ldyBDb25uZWN0aW9uKHRoaXMuYmlhc05ldXJvbiwgbmV4dE5ldXJvbik7XG4gICAgICAgIG5leHROZXVyb24uYWRkSW5wdXQoYmlhc0Nvbm5lY3Rpb24pO1xuICAgICAgICB0aGlzLmNvbm5lY3Rpb25zW2xdLnB1c2goYmlhc0Nvbm5lY3Rpb24pO1xuICAgICAgfSk7XG4gICAgfVxuICB9XG5cbiAgcHVibGljIGdldE5ldXJvbnMoKSB7XG4gICAgcmV0dXJuIHRoaXMubmV1cm9ucztcbiAgfVxuXG4gIHB1YmxpYyBnZXRDb25uZWN0aW9ucygpIHtcbiAgICByZXR1cm4gdGhpcy5jb25uZWN0aW9ucztcbiAgfVxuXG4gIHB1YmxpYyBnZXRJbnB1dFNpemUoKSB7XG4gICAgcmV0dXJuIHRoaXMuaW5wdXRTaXplO1xuICB9XG5cbiAgcHVibGljIGdldE91dHB1dFNpemUoKSB7XG4gICAgcmV0dXJuIHRoaXMub3V0cHV0U2l6ZTtcbiAgfVxuXG4gIHB1YmxpYyBnZXRMYXllckNudCgpIHtcbiAgICByZXR1cm4gdGhpcy5sYXllckNudDtcbiAgfVxuXG4gIHB1YmxpYyBnZXRIaWRkZW5MYXllclNpemVzKCkge1xuICAgIHJldHVybiB0aGlzLmhpZGRlbkxheWVyU2l6ZXM7XG4gIH1cblxuICBwdWJsaWMgc2V0UmF0ZShuZXdSYXRlOiBudW1iZXIpIHtcbiAgICB0aGlzLnJhdGUgPSBuZXdSYXRlO1xuICB9XG5cbiAgcHVibGljIGdldEl0ZXJhdGlvbigpIHtcbiAgICByZXR1cm4gdGhpcy5pdGVyQ250O1xuICB9XG5cbiAgcHVibGljIHNldFJlZ3VsYXJpemF0aW9uVHlwZShyZWdUeXBlOiBSZWd1bGFyaXphdGlvbnMpIHtcbiAgICB0aGlzLnJlZ1R5cGUgPSByZWdUeXBlO1xuICB9XG5cbiAgcHVibGljIHNldFJlZ3VsYXJpemF0aW9uUmF0ZShyYXRlOiBudW1iZXIpIHtcbiAgICB0aGlzLmxhbWJkYSA9IHJhdGU7XG4gIH1cblxuICBwdWJsaWMgZ2V0VHJhaW5pbmdTYW1wbGVzKCkge1xuICAgIHJldHVybiB0aGlzLnRyYWluU2FtcGxlcztcbiAgfVxuXG4gIHB1YmxpYyBzZXRUcmFpbmluZ1NhbXBsZXMoc2FtcGxlczogVHJhaW5TYW1wbGVbXSkge1xuICAgIHRoaXMudHJhaW5TYW1wbGVzID0gc2FtcGxlcztcbiAgfVxufVxuIl0sInNvdXJjZVJvb3QiOiIifQ==